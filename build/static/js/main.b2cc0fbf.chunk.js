(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{122:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(1),c=n(22),s=n.n(c),o=n(9),i=n(39),u=n(84),l=n(85),j=n(8),b=n.n(j),d=n(10),O=n(28),h=n.n(O),f=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/googlebooks/".concat(t));case 2:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="bearer ".concat(n),a={headers:{Authorization:r}},c={id:t.id,review:t.review,rating:t.rating,read:t.read,owned:t.owned,quotes:t.quotes},e.next=5,h.a.put("/api/googleBooks/edit",c,a);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(b.a.mark((function e(t,n,r){var a,c,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="bearer ".concat(r),c={headers:{Authorization:a}},s={book_id:t,quote:n},e.next=5,h.a.post("/api/googleBooks/addquote",s,c);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="bearer ".concat(n),a={headers:{Authorization:r}},c={title:t.volumeInfo.title,author:t.volumeInfo.authors[0],linkToCoverImage:t.volumeInfo.imageLinks.thumbnail,review:t.review,rating:t.rating,read:t.read,quotes:t.quotes},e.next=5,h.a.post("/api/googlebooks",c,a);case 5:return s=e.sent,console.log("Lis\xe4tty kirja: ".concat(s.data.title)),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="bearer ".concat(n),a={headers:{Authorization:r}},e.next=4,h.a.delete("/api/googlebooks/delete",{data:{config:a,id:t}});case 4:c=e.sent,console.log(c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g={books:[],filter:void 0,searching:!1},k=function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:r=t.sent,n({type:"BOOK_SEARCH",data:{books:r,filter:e}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_SEARCH":return{books:t.data.books,filter:t.data.filter,searching:!1};case"SEARCH_STARTED":return{books:[],filter:void 0,searching:!0};case"INIT_SEARCH_RESULTS":return t.data;default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOK_INFO":return t.data;case"RESET_BOOK_INFO":return null;default:return e}},S=n(36),C=n(14),N=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/user",t);case 2:return n=e.sent,console.log("User creation: ".concat(n.data)),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){return{type:"SHOW_NOTIFICATION",data:e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_NOTIFICATION":return t.data;case"RESET_MESSAGE":return null;default:return e}},T={bookInfo:null},A=function(e){return{type:"SET_OWNED_BOOK_INFO",data:{bookInfo:e}}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_OWNED_BOOK_INFO":case"RESET_OWNED_BOOK_INFO":return t.data;default:return e}},R={user:null},D=function(e,t,n){return function(){var r=Object(d.a)(b.a.mark((function r(a){var c;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p(e,t,n);case 3:return c=r.sent,r.next=6,a(A(c.data));case 6:a({type:"ADD_QUOTE",data:c.data}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},L=function(e){var t=e.newUsername,n=e.newPassword;return function(){var e=Object(d.a)(b.a.mark((function e(r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E({newUsername:t,newPassword:n});case 3:r({type:"CREATE_USER",data:R}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r(I(e.t0.response.data.error));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},U=function(e){var t=e.username,n=e.password;return function(){var e=Object(d.a)(b.a.mark((function e(r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N({username:t,password:n});case 3:a=e.sent,r({type:"LOGIN",data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(I(e.t0.response.data.error));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},K=function(e,t){return function(){var n=Object(d.a)(b.a.mark((function n(r){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x(e,t);case 3:return a=n.sent,n.next=6,r(A(a.data));case 6:r({type:"UPDATE_BOOK",data:e}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},q=function(e,t){return function(){var n=Object(d.a)(b.a.mark((function n(r){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m(e,t);case 3:return n.next=5,r((console.log("reseting book..."),{type:"RESET_OWNED_BOOK_INFO",data:T}));case 5:r({type:"DELETE_BOOK",data:e}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"LOGOUT":case"CREATE_USER":return t.data;case"ADD_BOOK":return Object(C.a)(Object(C.a)({},e),{},{user_books:[].concat(Object(S.a)(e.user_books),[t.data])});case"UPDATE_BOOK":return Object(C.a)(Object(C.a)({},e),{},{user_books:e.user_books.map((function(e){return e.id===t.data.id?Object(C.a)(Object(C.a)({},e),{},{rating:t.data.rating,review:t.data.review,quotes:t.data.quotes,read:t.data.read,owned:t.data.owned}):e}))});case"DELETE_BOOK":return Object(C.a)(Object(C.a)({},e),{},{user_books:e.user_books.filter((function(e){return e.id!==t.data}))});case"ADD_QUOTE":return Object(C.a)(Object(C.a)({},e),{},{user_books:e.user_books.map((function(e){return e.id===t.data.id?Object(C.a)(Object(C.a)({},e),{},{quotes:t.data.quotes}):e}))});case"RESET":return R;default:return e}},G=Object(i.combineReducers)({bookSearch:w,bookInfo:y,ownedBook:B,login:H,notification:_}),F=function(){try{var e=localStorage.getItem("userState");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),P=Object(i.createStore)(G,F,Object(l.composeWithDevTools)(Object(i.applyMiddleware)(u.a)));P.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("userState",t)}catch(n){return}}(P.getState())}));var W=P,M=n(136),z=n(127),J=n(86),Z=n(87),Q=(n(88),n(129)),V=n(130),X=n(128),Y=n(23),$=function(e){var t=e.info,n=Object(o.b)(),a=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:"SET_BOOK_INFO",data:{bookInfo:t}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)("p",{children:Object(r.jsx)(Y.b,{to:"/search/".concat(t.etag),children:Object(r.jsx)(X.a,{src:t.volumeInfo.imageLinks.thumbnail,onClick:function(){return a()}})})})},ee=function(){for(var e=Object(o.c)((function(e){return e.bookSearch})),t=Object.keys(e.books).length,n=[],a=0,c=0,s=0,i=0;i<t;i++)c%6||(n[++a]=[]),void 0!==e.books[i].volumeInfo.imageLinks&&(n[a].push(e.books[i]),c++);return Object(r.jsx)(Q.a,{fluid:!0,className:"pt-3",children:e.searching?Object(r.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(r.jsx)(V.a,{animation:"border",variant:"info"})}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("h3",{className:"text-center pb-5",children:["Search results for ",Object(r.jsxs)("i",{children:['"',e.filter,'"']})]}),n.map((function(e){return Object(r.jsx)(z.a,{className:"text-center",children:e.map((function(e){return Object(r.jsx)(J.a,{sm:6,md:4,lg:2,children:Object(r.jsx)($,{info:e},e.etag)},e.etag)}))},s++)}))]})})},te=n(137),ne=n(91),re=n(134),ae=n(16),ce=function(e){var t=e.showSort,n=e.sortDesc,a=e.sortAsc,c=Object(o.b)(),s=Object(ae.g)(),i=function(){document.getElementById("search bar").reset()};return Object(r.jsxs)(te.a,{bg:"dark",variant:"dark",children:[Object(r.jsx)(te.a.Brand,{as:Y.b,to:"/",children:"My Library"}),Object(r.jsxs)(ne.a,{className:"mr-auto",children:[t&&Object(r.jsxs)(re.a,{className:"ml-auto",title:"Sort by",id:"basic-nav-dropdown",children:[Object(r.jsx)(re.a.Item,{onClick:function(){return n("rating")},children:"Rating: Highest-Lowest"}),Object(r.jsx)(re.a.Item,{onClick:function(){return a("rating")},children:"Rating: Lowest-Highest"}),Object(r.jsx)(re.a.Item,{onClick:function(){return a("title")},children:"Title: A-Z"}),Object(r.jsx)(re.a.Item,{onClick:function(){return n("title")},children:"Title: Z-A"}),Object(r.jsx)(re.a.Item,{onClick:function(){return a("author")},children:"Author: A-Z"}),Object(r.jsx)(re.a.Item,{onClick:function(){return n("author")},children:"Author: Z-A"})]}),Object(r.jsx)(ne.a.Link,{as:Y.b,to:"/search",children:"Book finder"})]}),Object(r.jsxs)(ne.a,{className:"ml-auto",children:[Object(r.jsxs)(M.a,{onSubmit:function(e){e.preventDefault();var t=e.target.filter.value;c({type:"SEARCH_STARTED"}),s.push("/search"),c(k(t)),i()},inline:!0,id:"search bar",children:[Object(r.jsx)(M.a.Control,{name:"filter",type:"text",placeholder:"Search from Google Books",className:"mr-2"}),Object(r.jsx)(Z.a,{type:"submit",children:"Search"})]}),Object(r.jsx)(ne.a.Link,{className:"pl-5",as:Y.b,to:"/",onClick:function(){c({type:"INIT_SEARCH_RESULTS",data:g}),c({type:"LOGOUT",data:R})},children:"Logout"})]})]})},se=n(13),oe=n(138),ie=n(135),ue=n(131),le=(n(48),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notification}));return null!==t?Object(r.jsxs)(ue.a,{className:"notification",variant:"danger",onClose:function(){e({type:"RESET_MESSAGE",data:null})},dismissible:!0,children:[Object(r.jsx)(ue.a.Heading,{children:Object(r.jsx)("strong",{children:"Oops!"})}),Object(r.jsx)("p",{children:t})]}):null}),je=function(){var e=Object(o.b)(),t=Object(a.useState)(!1),n=Object(se.a)(t,2),c=n[0],s=n[1],i=function(){s(!1),k(""),C(""),_(!1),R(!1)},u=Object(a.useState)(""),l=Object(se.a)(u,2),j=l[0],O=l[1],h=Object(a.useState)(""),f=Object(se.a)(h,2),x=f[0],p=f[1],v=Object(a.useState)(""),m=Object(se.a)(v,2),g=m[0],k=m[1],w=Object(a.useState)(""),y=Object(se.a)(w,2),S=y[0],C=y[1],N=Object(a.useState)(!1),E=Object(se.a)(N,2),I=E[0],_=E[1],T=Object(a.useState)(!1),A=Object(se.a)(T,2),B=A[0],R=A[1],D=function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e(U({username:j,password:x})),O(""),p("");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(e,t){return e.length>=t},q=function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),K(g,5)||_(!0),K(S,5)?(console.log("Username: ".concat(g,", Password: ").concat(S)),e(L({newUsername:g,newPassword:S})),i()):R(!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)(Q.a,{fluid:!0,className:"testi",children:[Object(r.jsx)(le,{className:"notify"}),Object(r.jsxs)(oe.a,{className:"card",bg:"light",border:"dark",children:[Object(r.jsx)(oe.a.Header,{className:"text-center",children:Object(r.jsx)("h2",{children:"Login"})}),Object(r.jsx)(oe.a.Body,{children:Object(r.jsxs)(M.a,{onSubmit:D,children:[Object(r.jsxs)(M.a.Group,{controlId:"formBasicText",children:[Object(r.jsx)(M.a.Label,{children:"Username"}),Object(r.jsx)(M.a.Control,{type:"text",name:"usernameLogin",value:j,placeholder:"Username",onChange:function(e){var t=e.target;return O(t.value)}})]}),Object(r.jsxs)(M.a.Group,{controlId:"formBasicPassword",children:[Object(r.jsx)(M.a.Label,{children:"Password"}),Object(r.jsx)(M.a.Control,{type:"password",name:"passwordLogin",value:x,placeholder:"Password",onChange:function(e){var t=e.target;return p(t.value)}})]}),Object(r.jsx)(Z.a,{variant:"primary",type:"submit",children:"Login"})," ",Object(r.jsx)(Z.a,{variant:"success",onClick:function(){return s(!0)},children:"Create User"})]})})]}),Object(r.jsxs)(ie.a,{show:c,onHide:i,backdrop:"static",keyboard:!1,children:[Object(r.jsx)(ie.a.Header,{closeButton:!0,children:Object(r.jsx)(ie.a.Title,{children:"Register new user"})}),Object(r.jsx)(ie.a.Body,{children:Object(r.jsxs)(M.a,{onSubmit:q,children:[Object(r.jsxs)(M.a.Group,{children:[Object(r.jsx)(M.a.Row,{children:Object(r.jsx)(M.a.Label,{children:"Username"})}),Object(r.jsx)(M.a.Row,{children:Object(r.jsx)(M.a.Control,{type:"text",name:"usernameRegister",value:g,placeholder:"Choose your username",onChange:function(e){var t,n=e.target;return t=n.value,k(t),void(K(t,5)?_(!1):_(!0))}})}),I&&Object(r.jsx)(M.a.Row,{style:{color:"red"},children:"Username must be at least 5 characters long!"})]}),Object(r.jsxs)(M.a.Group,{children:[Object(r.jsx)(M.a.Row,{children:Object(r.jsx)(M.a.Label,{children:"Password"})}),Object(r.jsx)(M.a.Row,{children:Object(r.jsx)(M.a.Control,{type:"password",name:"passwordRegister",value:S,placeholder:"Choose a secure password",onChange:function(e){var t,n=e.target;return t=n.value,C(t),void(K(t,5)?R(!1):R(!0))}})}),B&&Object(r.jsx)(M.a.Row,{style:{color:"red"},children:"Password must be at least 5 characters long!"})]}),Object(r.jsxs)(M.a.Group,{as:z.a,children:[Object(r.jsx)(J.a,{xs:3,children:Object(r.jsx)(Z.a,{type:"submit",children:"Submit"})}),Object(r.jsx)(J.a,{xs:3,children:Object(r.jsx)(Z.a,{variant:"danger",onClick:i,children:"Cancel"})})]})]})})]})]})},be=function(){var e=Object(o.c)((function(e){return e.bookInfo})),t=Object(o.c)((function(e){return e.login.token})),n=e.bookInfo,c=Object(a.useState)(!1),s=Object(se.a)(c,2),i=s[0],u=s[1],l=Object(o.b)(),j=function(){l(function(e,t){return function(){var n=Object(d.a)(b.a.mark((function n(r){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v(e,t);case 3:return a=n.sent,n.next=6,r(A(a.data));case 6:r({type:"ADD_BOOK",data:a.data}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(n,t)),u(!0)};return null===n?Object(r.jsx)("h2",{children:"undefined"}):i?Object(r.jsx)(ae.a,{to:"/info/".concat(n.volumeInfo.title)}):Object(r.jsxs)(Q.a,{className:"pt-4 text-center",children:[Object(r.jsx)("h2",{children:n.volumeInfo.title}),Object(r.jsx)("h3",{children:n.volumeInfo.subtitle}),Object(r.jsx)("h5",{children:Object(r.jsx)("i",{children:n.volumeInfo.authors})}),Object(r.jsxs)(z.a,{className:"pt-4",children:[Object(r.jsx)(J.a,{md:6,children:Object(r.jsx)(X.a,{src:n.volumeInfo.imageLinks.thumbnail})}),Object(r.jsx)(J.a,{className:"text-justify",children:n.volumeInfo.description})]}),Object(r.jsxs)(z.a,{className:"pt-4",children:[Object(r.jsx)(J.a,{children:Object(r.jsx)(Z.a,{onClick:function(){return j()},children:"Add book"})}),Object(r.jsx)(J.a,{})]})]})},de=n(89),Oe=function(e){var t=e.book,n=Object(o.b)(),c=Object(o.c)((function(e){return e.login.token})),s=Object(a.useState)(t.rating),i=Object(se.a)(s,2),u=i[0],l=i[1],j=Object(a.useState)(t.rating),b=Object(se.a)(j,2),d=b[0],O=b[1];return Object(r.jsx)("div",{children:Object(S.a)(Array(5)).map((function(e,a){var s=a+1;return Object(r.jsx)(de.a,{className:"pointer",size:30,color:d>=s?"orange":"gray",onClick:function(){return function(e){l(e),t.rating=e,n(K(t,c))}(s)},onMouseEnter:function(){return O(s)},onMouseLeave:function(){return O(u)}},a)}))})},he=function(e){var t=e.book,n=Object(o.b)();return Object(r.jsxs)(oe.a,{className:"h-100 w-100",children:[Object(r.jsx)(oe.a.Body,{className:"genre",children:Object(r.jsxs)(z.a,{children:[Object(r.jsx)(J.a,{className:"pr-0",children:Object(r.jsx)(Y.b,{to:"/".concat(t.title),onClick:function(){return e=t,console.log("setting info"),console.log(e),void n(A(e));var e},children:Object(r.jsx)("img",{src:t.linkToCoverImage,alt:"book cover"})})}),Object(r.jsxs)(J.a,{className:"pl-0",children:[Object(r.jsx)(z.a,{children:Object(r.jsx)("h5",{children:t.title})}),Object(r.jsx)(z.a,{children:Object(r.jsx)("h6",{className:"text-muted",children:Object(r.jsxs)("i",{children:["by ",t.author]})})})]})]})}),Object(r.jsx)(oe.a.Footer,{children:Object(r.jsx)(z.a,{className:"float-right pr-2",children:Object(r.jsx)(Oe,{book:t})})})]})},fe=function(){var e=Object(o.c)((function(e){return e.login.user_books})),t=Object(a.useState)(Object(S.a)(e)),n=Object(se.a)(t,2),c=n[0],s=n[1];Object(a.useEffect)((function(){u("rating")}),[e]);var i={title:"title",author:"author",rating:"rating"},u=function(t){var n=i[t],r=Object(S.a)(e);r.sort((function(e,t){return e[n]>t[n]?-1:e[n]<t[n]?1:0})),s(r)};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ce,{showSort:!0,sortDesc:u,sortAsc:function(t){var n=i[t],r=Object(S.a)(e);r.sort((function(e,t){return e[n]>t[n]?1:e[n]<t[n]?-1:0})),s(r)}}),Object(r.jsx)(Q.a,{fluid:!0,className:"bookshelf",children:Object(r.jsx)(z.a,{className:"pb-3",children:c.map((function(e){return Object(r.jsx)(J.a,{sm:12,md:6,xl:4,className:"pt-3",children:Object(r.jsx)(he,{book:e})},e.id)}))})})]})},xe=n(133),pe=n(139),ve=n(132),me=n(90),ge=function(e){var t=e.setShow,n=Object(o.c)((function(e){return e.ownedBook.bookInfo})),c=Object(o.c)((function(e){return e.login.token})),s=Object(a.useState)(n.review),i=Object(se.a)(s,2),u=i[0],l=i[1],j=Object(a.useState)(!1),O=Object(se.a)(j,2),h=O[0],f=O[1],x=Object(a.useState)(!1),p=Object(se.a)(x,2),v=p[0],m=p[1],g=Object(a.useState)(null),k=Object(se.a)(g,2),w=k[0],y=k[1],S=Object(o.b)();Object(a.useEffect)((function(){l(n.review)}),[n]);var N=function(){var e=Object(d.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=Object(C.a)(Object(C.a)({},n),{},{review:u}),S(K(r,c)),f(!1),m(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),S(D(n.id,w,c)),m(!1),y(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(pe.a,{children:[Object(r.jsx)(ve.a,{eventKey:"review",title:"Review",children:h?Object(r.jsxs)(M.a,{onSubmit:N,children:[Object(r.jsx)(M.a.Group,{children:Object(r.jsx)(M.a.Control,{as:"textarea",rows:10,value:u,onChange:function(e){return l(e.target.value)}})}),Object(r.jsx)(Z.a,{type:"submit",className:"mr-1",children:"Save changes"}),Object(r.jsx)(Z.a,{variant:"secondary",onClick:function(){return f(!1)},children:"Cancel"})]}):Object(r.jsxs)(z.a,{className:"pt-2",children:[Object(r.jsx)(J.a,{xs:2,sm:1,children:Object(r.jsx)(Z.a,{variant:"link",onClick:function(){return f(!h)},children:"Edit"})}),Object(r.jsx)(J.a,{xs:10,sm:11,children:u})]})}),Object(r.jsx)(ve.a,{eventKey:"quotes",title:"Quotes",children:v?Object(r.jsxs)(M.a,{onSubmit:E,children:[Object(r.jsx)(M.a.Group,{children:Object(r.jsx)(M.a.Control,{as:"textarea",rows:10,onChange:function(e){return y(e.target.value)}})}),Object(r.jsx)(Z.a,{type:"submit",className:"mr-1",children:"Save quote"}),Object(r.jsx)(Z.a,{variant:"secondary",onClick:function(){return m(!1)},children:"Cancel"})]}):Object(r.jsxs)(z.a,{className:"pt-2",children:[Object(r.jsx)(J.a,{xs:12,sm:2,children:Object(r.jsx)(Z.a,{variant:"link",onClick:function(){return m(!v)},children:"Add quote"})}),Object(r.jsx)(J.a,{xs:12,sm:10,children:n.quotes.map((function(e){return Object(r.jsx)(z.a,{className:"mb-3",children:Object(r.jsx)(J.a,{children:Object(r.jsxs)(oe.a,{children:[Object(r.jsx)(oe.a.Header,{children:Object(r.jsx)(z.a,{children:Object(r.jsx)(J.a,{className:"pr-0 text-right",children:Object(r.jsx)(me.a,{className:"pointer",onClick:function(){return function(e){for(var t=n.quotes,r=0;r<t.length;r++)if(t[r].id===e){t.splice(r,1);break}var a=Object(C.a)(Object(C.a)({},n),{},{quotes:t});S(K(a,c))}(e.id)}})})})}),Object(r.jsx)(oe.a.Body,{className:"overflow-auto",children:Object(r.jsxs)("i",{children:[" ",e.quote]})})]})},e.id)})}))})]})}),Object(r.jsx)(ve.a,{eventKey:"options",title:"Options",children:Object(r.jsx)(z.a,{children:Object(r.jsx)(J.a,{className:"pt-5 text-center",children:Object(r.jsx)(Z.a,{variant:"link",style:{color:"red"},onClick:function(){return t(!0)},children:"Delete Book"})})})})]})},ke=function(e){var t=e.show,n=e.setShow,a=e.book,c=e.handleDelete;return Object(r.jsxs)(ie.a,{show:t,onHide:function(){return n(!1)},backdrop:"static",keyboard:!1,children:[Object(r.jsx)(ie.a.Header,{closeButton:!0,children:Object(r.jsxs)(ie.a.Title,{children:["Delete ",a.title," by ",a.author," from the library?"]})}),Object(r.jsx)(ie.a.Body,{children:Object(r.jsxs)(z.a,{children:[Object(r.jsx)(Z.a,{className:"mr-1",variant:"danger",onClick:c,children:"Delete"}),Object(r.jsx)(Z.a,{variant:"secondary",onClick:function(){return n(!1)},children:"Cancel"})]})})]})},we=function(){var e=Object(o.c)((function(e){return e.ownedBook.bookInfo})),t=Object(o.c)((function(e){return e.login.token})),n=Object(a.useState)((function(){return null===e?null:e.read})),c=Object(se.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)((function(){return null===e?null:e.owned})),l=Object(se.a)(u,2),j=l[0],O=l[1],h=Object(a.useState)(!1),f=Object(se.a)(h,2),x=f[0],p=f[1],v=Object(o.b)();Object(a.useEffect)((function(){null!==e&&(i(e.read),O(e.owned))}),[e]);var m=function(){var n=Object(d.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:v(q(e.id,t)),p(!1);case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return null===e?Object(r.jsx)(ae.a,{to:"/"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(xe.a,{fluid:!0,children:Object(r.jsx)(Q.a,{children:Object(r.jsxs)(z.a,{children:[Object(r.jsxs)(J.a,{xs:7,children:[Object(r.jsx)("h1",{children:e.title}),Object(r.jsx)("h5",{children:Object(r.jsx)("i",{children:e.author})}),Object(r.jsx)(Oe,{book:e}),Object(r.jsxs)(M.a,{className:"pt-3",children:[Object(r.jsx)(M.a.Check,{inline:!0,type:"checkbox",id:"read",label:"Read",checked:s,onChange:function(){var n=Object(C.a)(Object(C.a)({},e),{},{read:!e.read});i(!e.read),v(K(n,t))}}),Object(r.jsx)(M.a.Check,{inline:!0,type:"checkbox",id:"owned",label:"Owned",checked:j,onChange:function(){var n=Object(C.a)(Object(C.a)({},e),{},{owned:!e.owned});O(!e.owned),v(K(n,t))}})]})]}),Object(r.jsx)(J.a,{xs:5,children:Object(r.jsx)("img",{src:e.linkToCoverImage,alt:"cover"})})]})})}),Object(r.jsxs)(Q.a,{children:[Object(r.jsx)(ke,{show:x,setShow:p,book:e,handleDelete:m}),Object(r.jsx)(ge,{setShow:p})]})]})},ye=function(){return null===Object(o.c)((function(e){return e.login.user}))?Object(r.jsx)(je,{}):Object(r.jsx)(Y.a,{children:Object(r.jsxs)(ae.d,{children:[Object(r.jsxs)(ae.b,{path:"/search/:etag",children:[Object(r.jsx)(ce,{showSort:!1}),Object(r.jsx)(be,{})]}),Object(r.jsxs)(ae.b,{path:"/search",children:[Object(r.jsx)(ce,{showSort:!1}),Object(r.jsx)(ee,{})]}),Object(r.jsxs)(ae.b,{path:"/:title",children:[Object(r.jsx)(ce,{showSort:!1}),Object(r.jsx)(we,{})]}),Object(r.jsx)(ae.b,{path:"/",children:Object(r.jsx)(fe,{})})]})})};s.a.render(Object(r.jsx)(o.a,{store:W,children:Object(r.jsx)(ye,{})}),document.getElementById("root"))},48:function(e,t,n){}},[[122,1,2]]]);
//# sourceMappingURL=main.b2cc0fbf.chunk.js.map