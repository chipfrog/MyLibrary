(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n(20),s=n.n(c),o=n(9),i=n(30),u=n(67),j=n(68),l=n(7),b=n.n(l),d=n(10),O=n(28),h=n.n(O),p=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/googlebooks/".concat(t));case 2:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="bearer ".concat(n),a={headers:{Authorization:r}},c={title:t.volumeInfo.title,author:t.volumeInfo.authors[0],linkToCoverImage:t.volumeInfo.imageLinks.thumbnail,review:t.review,rating:t.rating,read:t.read,quotes:t.quotes},e.next=5,h.a.post("/api/googlebooks",c,a);case 5:s=e.sent,console.log(s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(e);case 2:r=t.sent,n({type:"BOOK_SEARCH",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_SEARCH":case"INIT_SEARCH_RESULTS":return t.data;default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOK_INFO":return t.data;default:return e}},g=n(72),w=n(37),k=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/user",t);case 2:return n=e.sent,console.log("User creation: ".concat(n.data)),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){return{type:"SHOW_NOTIFICATION",data:e}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_NOTIFICATION":return t.data;case"RESET_MESSAGE":return null;default:return e}},C={user:null},L=function(e){var t=e.username,n=e.password;return function(){var e=Object(d.a)(b.a.mark((function e(r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y({username:t,password:n});case 3:r({type:"CREATE_USER",data:C}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r(S("User already exists!"));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},E=function(e){var t=e.username,n=e.password;return console.log("username: ".concat(t,", password: ").concat(n)),function(){var e=Object(d.a)(b.a.mark((function e(r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k({username:t,password:n});case 3:a=e.sent,r({type:"LOGIN",data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(S("Wrong credentials!"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},R=function(e,t){return function(){var n=Object(d.a)(b.a.mark((function n(r){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x(e,t);case 3:a={title:e.volumeInfo.title,author:e.volumeInfo.authors[0],linkToCoverImage:e.volumeInfo.imageLinks.thumbnail,rating:e.rating,quotes:e.quotes},r({type:"ADD_BOOK",data:a}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"LOGOUT":case"CREATE_USER":return t.data;case"ADD_BOOK":return Object(w.a)(Object(w.a)({},e),{},{user_books:[].concat(Object(g.a)(e.user_books),[t.data])});case"UPDATE_BOOK":case"DELETE_BOOK":return e;case"RESET":return C;default:return e}},T=Object(i.combineReducers)({bookSearch:v,bookInfo:m,login:N,notification:I}),B=function(){try{var e=localStorage.getItem("userState");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),_=Object(i.createStore)(T,B,Object(j.composeWithDevTools)(Object(i.applyMiddleware)(u.a)));_.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("userState",t)}catch(n){return}}(_.getState())}));var G=_,A=n(109),U=n(112),H=n(105),D=n(69),K=n(106),q=n(71),F=function(){var e=Object(o.b)(),t=function(){var t=Object(d.a)(b.a.mark((function t(r){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),a=r.target.filter.value,e(f(a)),n();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){document.getElementById("search bar").reset()};return Object(r.jsx)(U.a,{className:"mt-5 mb-5",id:"search bar",onSubmit:t,children:Object(r.jsxs)(H.a,{children:[Object(r.jsx)(D.a,{xs:{span:5,offset:3},sm:{span:6,offset:3},md:{span:6,offset:2},lg:{span:6,offset:2},children:Object(r.jsx)(U.a.Control,{type:"text",name:"filter",placeholder:"Search books"})}),Object(r.jsx)(D.a,{xs:1,children:Object(r.jsx)(K.a,{variant:"primary",type:"submit",children:Object(r.jsx)(q.a,{})})})]})})},M=n(107),P=n(22),J=function(e){var t=e.info,n=Object(o.b)(),a=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:"SET_BOOK_INFO",data:{bookInfo:t}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)("p",{children:Object(r.jsx)(P.b,{to:"/search/".concat(t.etag),children:Object(r.jsx)(M.a,{src:t.volumeInfo.imageLinks.thumbnail,onClick:function(){return a()}})})})},W=function(){for(var e=Object(o.c)((function(e){return e.bookSearch})),t=Object.keys(e).length,n=[],a=0,c=0,s=0,i=0;i<t;i++)c%6||(n[++a]=[]),void 0!==e[i].volumeInfo.imageLinks&&(n[a].push(e[i]),c++);return Object(r.jsx)("div",{children:n.map((function(e){return Object(r.jsx)(H.a,{className:"text-center",children:e.map((function(e){return Object(r.jsx)(D.a,{sm:6,md:4,lg:2,children:Object(r.jsx)(J,{info:e},e.etag)},e.etag)}))},s++)}))})},z=n(114),Q=n(113),V=function(){var e=Object(o.b)();return Object(r.jsxs)(z.a,{bg:"dark",variant:"dark",children:[Object(r.jsx)(z.a.Brand,{as:P.b,to:"/",children:"My Library"}),Object(r.jsxs)(Q.a,{className:"mr-auto",children:[Object(r.jsx)(Q.a.Link,{as:P.b,to:"/search",children:"Book finder"}),Object(r.jsx)(Q.a.Link,{as:P.b,to:"/user",children:"User"}),Object(r.jsx)(Q.a.Link,{as:P.b,to:"/",onClick:function(){e({type:"INIT_SEARCH_RESULTS",data:[]}),e({type:"LOGOUT",data:C})},children:"Logout"})]})]})},X=n(17),Y=n(115),Z=n(111),$=n(108),ee=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notification}));return null!==t?Object(r.jsxs)($.a,{className:"notification",variant:"danger",onClose:function(){e({type:"RESET_MESSAGE",data:null})},dismissible:!0,children:[Object(r.jsx)($.a.Heading,{children:Object(r.jsx)("strong",{children:"Notification!"})}),Object(r.jsx)("p",{children:t})]}):null},te=(n(52),function(){var e=Object(o.b)(),t=Object(a.useState)(!1),n=Object(X.a)(t,2),c=n[0],s=n[1],i=function(){return s(!1)},u=Object(a.useState)(""),j=Object(X.a)(u,2),l=j[0],O=j[1],h=Object(a.useState)(""),p=Object(X.a)(h,2),x=p[0],f=p[1],v=function(){var t=Object(d.a)(b.a.mark((function t(n){var r,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r=n.target.usernameLogin.value,a=n.target.passwordLogin.value,e(E({username:r,password:a}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e(L({username:l,password:x})),O(""),f(""),i();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)(A.a,{children:[Object(r.jsx)(ee,{}),Object(r.jsx)(H.a,{children:Object(r.jsx)(D.a,{className:"login",children:Object(r.jsxs)(Y.a,{className:"card",bg:"light",border:"dark",children:[Object(r.jsx)(Y.a.Header,{className:"text-center",children:Object(r.jsx)("h2",{children:"Login"})}),Object(r.jsx)(Y.a.Body,{children:Object(r.jsxs)(U.a,{onSubmit:v,children:[Object(r.jsxs)(U.a.Group,{controlId:"formBasicText",children:[Object(r.jsx)(U.a.Label,{children:"Username"}),Object(r.jsx)(U.a.Control,{type:"text",name:"usernameLogin",placeholder:"Username"})]}),Object(r.jsxs)(U.a.Group,{controlId:"formBasicPassword",children:[Object(r.jsx)(U.a.Label,{children:"Password"}),Object(r.jsx)(U.a.Control,{type:"password",name:"passwordLogin",placeholder:"Password"})]}),Object(r.jsx)(K.a,{variant:"primary",type:"submit",children:"Login"})," ",Object(r.jsx)(K.a,{variant:"success",onClick:function(){return s(!0)},children:"Create User"})]})})]})})}),Object(r.jsxs)(Z.a,{show:c,onHide:i,backdrop:"static",keyboard:!1,children:[Object(r.jsx)(Z.a.Header,{closeButton:!0,children:Object(r.jsx)(Z.a.Title,{children:"Register new user"})}),Object(r.jsx)(Z.a.Body,{children:Object(r.jsxs)(U.a,{onSubmit:m,children:[Object(r.jsxs)(U.a.Group,{children:[Object(r.jsx)(U.a.Row,{children:Object(r.jsx)(U.a.Label,{children:"Username"})}),Object(r.jsx)(U.a.Row,{children:Object(r.jsx)(U.a.Control,{type:"text",name:"usernameRegister",value:l,placeholder:"Choose your username",onChange:function(e){var t=e.target;return O(t.value)}})})]}),Object(r.jsxs)(U.a.Group,{children:[Object(r.jsx)(U.a.Row,{children:Object(r.jsx)(U.a.Label,{children:"Password"})}),Object(r.jsx)(U.a.Row,{children:Object(r.jsx)(U.a.Control,{type:"password",name:"passwordRegister",value:x,placeholder:"Choose a secure password",onChange:function(e){var t=e.target;return f(t.value)}})})]}),Object(r.jsxs)(U.a.Group,{as:H.a,children:[Object(r.jsx)(D.a,{xs:3,children:Object(r.jsx)(K.a,{type:"submit",children:"Submit"})}),Object(r.jsx)(D.a,{xs:3,children:Object(r.jsx)(K.a,{variant:"danger",onClick:i,children:"Cancel"})})]})]})})]})]})}),ne=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.bookInfo})),n=Object(o.c)((function(e){return e.login.token})),c=t.bookInfo,s=Object(a.useState)(!1),i=Object(X.a)(s,2),u=i[0],j=i[1],l=function(){return j(!1)},O=Object(a.useState)(""),h=Object(X.a)(O,2),p=h[0],x=h[1],f=Object(a.useState)(1),v=Object(X.a)(f,2),m=v[0],g=v[1],k=Object(a.useState)(!1),y=Object(X.a)(k,2),S=y[0],I=y[1],C=Object(a.useState)(""),L=Object(X.a)(C,2),E=L[0],N=L[1],T=Object(a.useState)([]),B=Object(X.a)(T,2),_=B[0],G=B[1],q=Object(a.useState)(0),F=Object(X.a)(q,2),P=F[0],J=F[1];if(null===c)return Object(r.jsx)("h2",{children:"undefined"});var W=function(){var t=Object(d.a)(b.a.mark((function t(r){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),a=Object(w.a)(Object(w.a)({},c),{},{rating:m,review:p,read:S,quotes:_}),console.log(a),e(R(a,n)),x(""),g(1),I(!1),N(""),G([]),J(0),l();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)(A.a,{className:"pt-4 text-center",children:[Object(r.jsx)("h2",{children:c.volumeInfo.title}),Object(r.jsx)("h3",{children:c.volumeInfo.subtitle}),Object(r.jsx)("h5",{children:Object(r.jsx)("i",{children:c.volumeInfo.authors})}),Object(r.jsxs)(H.a,{className:"pt-4",children:[Object(r.jsx)(D.a,{md:6,children:Object(r.jsx)(M.a,{src:c.volumeInfo.imageLinks.thumbnail})}),Object(r.jsx)(D.a,{className:"text-justify",children:c.volumeInfo.description})]}),Object(r.jsxs)(H.a,{className:"pt-4",children:[Object(r.jsx)(D.a,{children:Object(r.jsx)(K.a,{onClick:function(){return j(!0)},children:"Add book"})}),Object(r.jsx)(D.a,{})]}),Object(r.jsxs)(Z.a,{size:"xl",show:u,onHide:l,backdrop:"static",keyboard:!1,children:[Object(r.jsx)(Z.a.Header,{closeButton:!0,children:Object(r.jsxs)(Z.a.Title,{children:[c.volumeInfo.title," by ",c.volumeInfo.authors]})}),Object(r.jsx)(Z.a.Body,{children:Object(r.jsxs)(U.a,{onSubmit:W,className:"pt-4 text-left",children:[Object(r.jsx)(U.a.Row,{children:Object(r.jsxs)(U.a.Group,{controlId:"formGrade",children:[Object(r.jsx)(U.a.Label,{children:"Grade"}),Object(r.jsxs)(U.a.Control,{as:"select",value:m,onChange:function(e){return g(e.target.value)},children:[Object(r.jsx)("option",{value:1,children:"1"}),Object(r.jsx)("option",{value:2,children:"2"}),Object(r.jsx)("option",{value:3,children:"3"}),Object(r.jsx)("option",{value:4,children:"4"}),Object(r.jsx)("option",{value:5,children:"5"}),Object(r.jsx)("option",{value:6,children:"6"}),Object(r.jsx)("option",{value:7,children:"7"}),Object(r.jsx)("option",{value:8,children:"8"}),Object(r.jsx)("option",{value:9,children:"9"}),Object(r.jsx)("option",{value:10,children:"10"})]})]})}),Object(r.jsx)(U.a.Row,{children:Object(r.jsxs)(U.a.Group,{as:D.a,controlId:"formReview",children:[Object(r.jsx)(U.a.Label,{children:"Review"}),Object(r.jsx)(U.a.Control,{as:"textarea",rows:10,value:p,onChange:function(e){return x(e.target.value)}})]})}),Object(r.jsx)(U.a.Row,{children:Object(r.jsxs)(U.a.Group,{as:D.a,children:[Object(r.jsx)(U.a.Label,{children:"Favorite quotes"}),Object(r.jsx)(U.a.Control,{as:"textarea",rows:6,value:E,onChange:function(e){return N(e.target.value)}})]})}),Object(r.jsxs)(U.a.Row,{children:[Object(r.jsx)(U.a.Group,{as:D.a,children:Object(r.jsx)(K.a,{onClick:function(){G(_.concat(E)),N(""),J(P+1)},children:"Add quote"})}),Object(r.jsxs)(U.a.Group,{as:D.a,children:["Quotes saved: ",P]}),Object(r.jsx)(U.a.Group,{as:D.a,controlId:"formBookRead",children:Object(r.jsx)(U.a.Check,{label:"Book read",onChange:function(){return I(!S)}})})]}),Object(r.jsx)(U.a.Row,{children:Object(r.jsx)(U.a.Group,{as:D.a,children:Object(r.jsx)(K.a,{type:"submit",children:"Submit"})})})]})})]})]})},re=n(110),ae=function(){var e=Object(o.c)((function(e){return e.login.user_books}));return Object(r.jsxs)(A.a,{children:[Object(r.jsx)("h1",{className:"pt-3 pb-5 text-center",children:"My Library"}),e.map((function(e){return Object(r.jsx)("ul",{children:Object(r.jsxs)(re.a,{as:"li",children:[Object(r.jsx)("img",{src:e.linkToCoverImage,alt:"book cover"}),Object(r.jsxs)(re.a.Body,{children:[Object(r.jsx)("h5",{children:e.title}),Object(r.jsx)("h6",{children:e.author}),Object(r.jsxs)("p",{children:["rating: ",e.rating,"/10"]})]})]})})}))]})},ce=n(11),se=function(){return null===Object(o.c)((function(e){return e.login.user}))?Object(r.jsx)(A.a,{fluid:!0,className:"testi",children:Object(r.jsx)(te,{})}):Object(r.jsxs)(P.a,{children:[Object(r.jsx)(V,{}),Object(r.jsxs)(ce.c,{children:[Object(r.jsx)(ce.a,{path:"/search/:etag",children:Object(r.jsx)(ne,{})}),Object(r.jsxs)(ce.a,{path:"/search",children:[Object(r.jsx)("h2",{className:"mt-3 text-center",children:"Google Books Search"}),Object(r.jsx)(F,{}),Object(r.jsx)(W,{})]}),Object(r.jsx)(ce.a,{path:"/",children:Object(r.jsx)(ae,{})})]})]})};s.a.render(Object(r.jsx)(o.a,{store:G,children:Object(r.jsx)(se,{})}),document.getElementById("root"))},52:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.6a7098a1.chunk.js.map