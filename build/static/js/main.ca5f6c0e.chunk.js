(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{304:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(1),c=n(28),s=n.n(c),o=n(10),i=n(49),u=n(159),l=n(160),j=n(9),b=n.n(j),d=n(11),O=n(25),h=n.n(O),x=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,a=t.toLowerCase(),"Filter by"===t){e.next=8;break}return e.next=5,h.a.get("/api/googlebooks/in".concat(a,":").concat(n));case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,h.a.get("/api/googlebooks/".concat(n));case 10:r=e.sent;case 11:return e.abrupt("return",r.data);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="bearer ".concat(n),a={headers:{Authorization:r}},c={id:t.id,review:t.review,rating:t.rating,read:t.read,owned:t.owned,color:t.color,quotes:t.quotes,categories:t.categories},e.next=5,h.a.put("/api/googleBooks/edit",c,a);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(b.a.mark((function e(t,n,r){var a,c,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="bearer ".concat(r),c={headers:{Authorization:a}},s={book_id:t,quote:n},e.next=5,h.a.post("/api/googleBooks/addquote",s,c);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="bearer ".concat(n),a={headers:{Authorization:r}},c={date:new Date,title:t.volumeInfo.title,author:t.volumeInfo.authors[0],linkToCoverImage:t.volumeInfo.imageLinks.thumbnail,review:t.review,rating:t.rating,read:t.read,quotes:t.quotes,categories:t.volumeInfo.categories},e.next=5,h.a.post("/api/googlebooks",c,a);case 5:return s=e.sent,console.log("Lis\xe4tty kirja: ".concat(s.data.title)),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="bearer ".concat(n),a={headers:{Authorization:r}},e.next=4,h.a.delete("/api/googlebooks/delete",{data:{config:a,id:t}});case 4:c=e.sent,console.log(c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g={books:[],filter:void 0,keyWords:void 0,searching:!1},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_SEARCH":return{books:t.data.books,filter:t.data.filter,keyWords:t.data.keyWords,searching:!1};case"SEARCH_STARTED":return{books:[],filter:void 0,searching:!0};case"INIT_SEARCH_RESULTS":return t.data;default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOK_INFO":return t.data;case"RESET_BOOK_INFO":return null;default:return e}},y=n(22),C=n(14),S=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/user",t);case 2:return n=e.sent,console.log("User creation: ".concat(n.data)),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="bearer ".concat(t),console.log("poisto frontissa"),console.log(n),r={headers:{Authorization:n}},e.next=6,h.a.delete("/api/user/delete",{data:{config:r}});case 6:a=e.sent,console.log(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I={type:null,show:!1,message:""},T=function(e,t){return{type:"SET_NOTIFICATION",data:{type:e,show:!0,message:t}}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":case"RESET_NOTIFICATION":return t.data;default:return e}},D={bookInfo:null},A=function(e){return{type:"SET_OWNED_BOOK_INFO",data:{bookInfo:e}}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_OWNED_BOOK_INFO":case"RESET_OWNED_BOOK_INFO":return t.data;default:return e}},B={scrollToBottom:!1,highlightBook:!1,id:null},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_BOOK_ADDED":return t.data;case"RESET_LIBRARY":return B;default:return e}},U={user:null},F=function(e,t,n){return function(){var r=Object(d.a)(b.a.mark((function r(a){var c;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p(e,t,n);case 3:return c=r.sent,r.next=6,a(A(c.data));case 6:a({type:"ADD_QUOTE",data:c.data}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},K=function(e){var t=e.newUsername,n=e.newPassword;return function(){var e=Object(d.a)(b.a.mark((function e(r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N({newUsername:t,newPassword:n});case 3:r({type:"CREATE_USER",data:U}),r(T("success","User was successfully created!")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(T("danger",e.t0.response.data.error));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},q=function(e){var t=e.username,n=e.password;return function(){var e=Object(d.a)(b.a.mark((function e(r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S({username:t,password:n});case 3:a=e.sent,r({type:"LOGIN",data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(T("danger",e.t0.response.data.error));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},H=function(e,t){return function(){var n=Object(d.a)(b.a.mark((function n(r){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f(e,t);case 3:return a=n.sent,console.log("Reducerissa:"),console.log(a),n.next=8,r(A(a.data));case 8:r({type:"UPDATE_BOOK",data:e}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},W=function(e,t){return function(){var n=Object(d.a)(b.a.mark((function n(r){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m(e,t);case 3:return n.next=5,r((console.log("reseting book..."),{type:"RESET_OWNED_BOOK_INFO",data:D}));case 5:r({type:"DELETE_BOOK",data:e}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"LOGOUT":case"CREATE_USER":return t.data;case"DELETE_USER":return U;case"ADD_BOOK":return Object(C.a)(Object(C.a)({},e),{},{user_books:[].concat(Object(y.a)(e.user_books),[t.data])});case"UPDATE_BOOK":return Object(C.a)(Object(C.a)({},e),{},{user_books:e.user_books.map((function(e){return e.id===t.data.id?Object(C.a)(Object(C.a)({},e),{},{rating:t.data.rating,review:t.data.review,quotes:t.data.quotes,categories:t.data.categories,read:t.data.read,owned:t.data.owned,color:t.data.color}):e}))});case"DELETE_BOOK":return Object(C.a)(Object(C.a)({},e),{},{user_books:e.user_books.filter((function(e){return e.id!==t.data}))});case"ADD_QUOTE":return Object(C.a)(Object(C.a)({},e),{},{user_books:e.user_books.map((function(e){return e.id===t.data.id?Object(C.a)(Object(C.a)({},e),{},{quotes:t.data.quotes}):e}))});case"RESET":return U;default:return e}},P=Object(i.combineReducers)({bookSearch:k,bookInfo:w,ownedBook:R,login:z,notification:_,library:L}),G=function(){try{var e=localStorage.getItem("userState");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),J=Object(i.createStore)(P,G,Object(l.composeWithDevTools)(Object(i.applyMiddleware)(u.a)));J.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("userState",t)}catch(n){return}}(J.getState())}));var M=J,Z=n(311),Q=n(312),Y=n(313),V=n(161),X=n(310),$=n(33),ee=function(e){var t=e.info,n=Object(o.b)(),a=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:"SET_BOOK_INFO",data:{bookInfo:t}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)("p",{children:Object(r.jsx)($.b,{to:"/search/".concat(t.etag),children:Object(r.jsx)(X.a,{src:t.volumeInfo.imageLinks.thumbnail,onClick:function(){return a()}})})})},te=function(){for(var e=Object(o.c)((function(e){return e.bookSearch})),t=Object.keys(e.books).length,n=[],a=0,c=0,s=0,i=0;i<t;i++)c%6||(n[++a]=[]),void 0!==e.books[i].volumeInfo.imageLinks&&(n[a].push(e.books[i]),c++);return Object(r.jsx)(Z.a,{fluid:!0,className:"pt-3 mt-5",children:e.searching?Object(r.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(r.jsx)(Q.a,{animation:"border",variant:"info"})}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("h3",{className:"text-center pb-5 mt-5",children:["Search results for ",Object(r.jsxs)("i",{children:['"',e.keyWords,'"']})]}),n.map((function(e){return Object(r.jsx)(Y.a,{className:"text-center",children:e.map((function(e){return Object(r.jsx)(V.a,{sm:6,md:4,lg:2,children:Object(r.jsx)(ee,{info:e},e.etag)},e.etag)}))},s++)}))]})})},ne=n(12),re=n(323),ae=n(168),ce=n(314),se=n(322),oe=n(315),ie=n(316),ue=n(162),le=n(18),je=n(19),be=(n(41),n(321)),de=function(e){var t=e.show,n=e.setShow,a=e.handleDelete;return Object(r.jsxs)(be.a,{show:t,onHide:function(){return n(!1)},backdrop:"static",keyboard:!1,children:[Object(r.jsx)(be.a.Header,{closeButton:!0,children:Object(r.jsx)(be.a.Title,{children:"Warning"})}),Object(r.jsx)(be.a.Body,{children:Object(r.jsx)(Y.a,{children:Object(r.jsx)("b",{children:"Do you want delete your account and all your books? This action cannot be reversed."})})}),Object(r.jsxs)(be.a.Footer,{children:[Object(r.jsx)(ue.a,{className:"mr-1",variant:"danger",onClick:a,children:"Delete my account"}),Object(r.jsx)(ue.a,{variant:"secondary",onClick:function(){return n(!1)},children:"Cancel"})]})]})},Oe=n(61),he=function(e){var t=e.showSort,n=e.sortDesc,c=e.sortAsc,s=e.filterBooks,i=e.owned,u=e.read,l=e.notOwned,j=e.unread,O=e.setRead,h=e.setOwned,f=e.setUnread,p=e.setNotOwned,v=Object(o.b)(),m=Object(le.g)(),k=Object(o.c)((function(e){return e.login.token})),w=Object(o.c)((function(e){return e.login.username})),y=Object(a.useState)(!1),C=Object(ne.a)(y,2),S=C[0],N=C[1],I=Object(a.useState)("Search by"),T=Object(ne.a)(I,2),_=T[0],D=T[1],A=Object(a.useState)("Rating Desc"),R=Object(ne.a)(A,2),B=R[0],L=R[1];Object(a.useEffect)((function(){s&&s(i,u,l,j,B)}),[i,u,l,j]);var F=function(){document.getElementById("search bar").reset()},K=function(e,t){var r=t.charAt(0).toUpperCase()+t.slice(1);L(r+" "+e),"Desc"===e?n(t):c(t)},q=Object(r.jsx)(je.c,{size:25});return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(re.a,{className:"navigation",fixed:"top",bg:"dark",variant:"dark",children:[Object(r.jsx)(re.a.Brand,{as:$.b,to:"/",children:"My Library"}),Object(r.jsxs)(ae.a,{className:"mr-auto",children:[t&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(ce.a,{className:"ml-auto",title:B,id:"basic-nav-dropdown",children:[Object(r.jsx)(ce.a.Item,{onClick:function(){return K("Desc","rating")},children:"Rating: Highest-Lowest"}),Object(r.jsx)(ce.a.Item,{onClick:function(){return K("Asc","rating")},children:"Rating: Lowest-Highest"}),Object(r.jsx)(ce.a.Item,{onClick:function(){return K("Asc","title")},children:"Title: A-Z"}),Object(r.jsx)(ce.a.Item,{onClick:function(){return K("Desc","title")},children:"Title: Z-A"}),Object(r.jsx)(ce.a.Item,{onClick:function(){return K("Asc","author")},children:"Author: A-Z"}),Object(r.jsx)(ce.a.Item,{onClick:function(){return K("Desc","author")},children:"Author: Z-A"})]}),Object(r.jsx)(ce.a,{title:"Filter by",children:Object(r.jsxs)(se.a,{className:"px-4 py-3",children:[Object(r.jsx)(se.a.Check,{id:"owned",inline:"true",type:"checkbox",label:"Owned",onChange:function(){return h(!i)},disabled:l}),Object(r.jsx)(se.a.Check,{id:"not-owned",inline:"true",type:"checkbox",label:"Not owned",onChange:function(){return p(!l)},disabled:i}),Object(r.jsx)(se.a.Check,{id:"read",inline:"true",type:"checkbox",label:"Read",onChange:function(){return O(!u)},disabled:j}),Object(r.jsx)(se.a.Check,{id:"unread",inline:"true",type:"checkbox",label:"Unread",onChange:function(){return f(!j)},disabled:u})]})})]}),Object(r.jsx)(ae.a.Link,{as:$.b,to:"/search",children:"Book finder"})]}),Object(r.jsxs)(ae.a,{className:"ml-auto",xs:12,sm:6,children:[Object(r.jsx)(se.a,{className:"mr-5",onSubmit:function(e){e.preventDefault();var t=e.target.keyWords.value;v({type:"SEARCH_STARTED"}),m.push("/search"),v(function(e,t){return function(){var n=Object(d.a)(b.a.mark((function n(r){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x(e,t);case 2:a=n.sent,Array.isArray(a)||(a=[]),r({type:"BOOK_SEARCH",data:{books:a,filter:e,keyWords:t}});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(_,t)),F()},inline:"true",id:"search bar",children:Object(r.jsxs)(oe.a,{children:[Object(r.jsxs)(ie.a,{variant:"secondary",title:_,children:[Object(r.jsx)(Oe.a,{onClick:function(){return D("Search by")},children:"No filter"}),Object(r.jsx)(Oe.a,{onClick:function(){return D("Title")},children:"Title"}),Object(r.jsx)(Oe.a,{onClick:function(){return D("Author")},children:"Author"})]}),Object(r.jsx)(se.a.Control,{id:"keyWords",type:"text",placeholder:"Search from Google Books"}),Object(r.jsx)(ue.a,{id:"search_books-button",type:"submit",children:Object(r.jsx)(je.e,{})})]})}),Object(r.jsx)(ae.a.Link,{disabled:!0,className:"text-white",inline:"true",children:w}),Object(r.jsxs)(ce.a,{alignRight:!0,title:q,children:[Object(r.jsx)(ce.a.Item,{onClick:function(){v({type:"INIT_SEARCH_RESULTS",data:g}),v({type:"LOGOUT",data:U}),m.push("/")},children:Object(r.jsx)(Y.a,{children:Object(r.jsxs)(V.a,{children:[Object(r.jsx)("span",{className:"mr-2",children:"Logout"}),Object(r.jsx)(je.f,{})]})})}),Object(r.jsx)(ce.a.Divider,{}),Object(r.jsx)(ce.a.Item,{className:"text-danger",onClick:function(){return N(!0)},children:Object(r.jsx)(Y.a,{children:Object(r.jsxs)(V.a,{children:[Object(r.jsx)("span",{className:"mr-2",children:"Delete Account"}),Object(r.jsx)(je.i,{})]})})})]})]})]}),Object(r.jsx)(Z.a,{children:Object(r.jsx)(de,{show:S,setShow:N,handleDelete:function(){v(function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E(e);case 3:n({type:"DELETE_USER"}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(k))}})})]})},xe=n(324),fe=n(317),pe=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notification}));return null!==t&&t.show?(setTimeout((function(){e({type:"RESET_NOTIFICATION",data:{type:null,show:!1,message:""}})}),3e3),Object(r.jsxs)(fe.a,{className:"notification",variant:t.type,onClose:function(){e({type:"RESET_NOTIFICATION",data:{type:null,show:!1,message:""}})},dismissible:!0,children:[Object(r.jsx)(fe.a.Heading,{children:"danger"===t.type?Object(r.jsx)("strong",{children:"Oops!"}):Object(r.jsx)("strong",{children:"You're awesome!"})}),Object(r.jsx)("p",{children:t.message})]})):null},ve=function(){var e=Object(o.b)(),t=Object(a.useState)(!1),n=Object(ne.a)(t,2),c=n[0],s=n[1],i=function(){s(!1),k(""),S(""),T(!1),R(!1)},u=Object(a.useState)(""),l=Object(ne.a)(u,2),j=l[0],O=l[1],h=Object(a.useState)(""),x=Object(ne.a)(h,2),f=x[0],p=x[1],v=Object(a.useState)(""),m=Object(ne.a)(v,2),g=m[0],k=m[1],w=Object(a.useState)(""),y=Object(ne.a)(w,2),C=y[0],S=y[1],N=Object(a.useState)(!1),E=Object(ne.a)(N,2),I=E[0],T=E[1],_=Object(a.useState)(!1),D=Object(ne.a)(_,2),A=D[0],R=D[1],B=function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e(q({username:j,password:f})),O(""),p("");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(e,t){return e.length>=t},U=function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),L(g,5)||T(!0),L(C,5)?(console.log("Username: ".concat(g,", Password: ").concat(C)),e(K({newUsername:g,newPassword:C})),i()):R(!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)(Z.a,{fluid:!0,className:"login_screen",children:[Object(r.jsx)(pe,{className:"notify"}),Object(r.jsxs)(xe.a,{className:"card",bg:"light",border:"dark",children:[Object(r.jsx)(xe.a.Header,{className:"text-center",children:Object(r.jsx)("h2",{children:"Login"})}),Object(r.jsx)(xe.a.Body,{children:Object(r.jsxs)(se.a,{onSubmit:B,children:[Object(r.jsxs)(se.a.Group,{controlId:"formBasicText",children:[Object(r.jsx)(se.a.Label,{children:"Username"}),Object(r.jsx)(se.a.Control,{id:"username-field",type:"text",name:"usernameLogin",value:j,placeholder:"Username",onChange:function(e){var t=e.target;return O(t.value)}})]}),Object(r.jsxs)(se.a.Group,{controlId:"formBasicPassword",children:[Object(r.jsx)(se.a.Label,{children:"Password"}),Object(r.jsx)(se.a.Control,{id:"password-field",type:"password",name:"passwordLogin",value:f,placeholder:"Password",onChange:function(e){var t=e.target;return p(t.value)}})]}),Object(r.jsx)(ue.a,{id:"login-button",variant:"primary",type:"submit",children:"Login"})," ",Object(r.jsx)(ue.a,{id:"create_user-button",variant:"success",onClick:function(){return s(!0)},children:"Create User"})]})})]}),Object(r.jsxs)(be.a,{show:c,onHide:i,backdrop:"static",keyboard:!1,children:[Object(r.jsx)(be.a.Header,{closeButton:!0,children:Object(r.jsx)(be.a.Title,{children:"Register new user"})}),Object(r.jsx)(be.a.Body,{children:Object(r.jsxs)(se.a,{onSubmit:U,children:[Object(r.jsxs)(se.a.Group,{children:[Object(r.jsx)(se.a.Row,{children:Object(r.jsx)(se.a.Label,{children:"Username"})}),Object(r.jsx)(se.a.Row,{children:Object(r.jsx)(se.a.Control,{id:"usernameRegister",type:"text",value:g,placeholder:"Choose your username",onChange:function(e){var t,n=e.target;return t=n.value,k(t),void(L(t,5)?T(!1):T(!0))}})}),I&&Object(r.jsx)(se.a.Row,{style:{color:"red"},children:"Username must be at least 5 characters long!"})]}),Object(r.jsxs)(se.a.Group,{children:[Object(r.jsx)(se.a.Row,{children:Object(r.jsx)(se.a.Label,{children:"Password"})}),Object(r.jsx)(se.a.Row,{children:Object(r.jsx)(se.a.Control,{id:"passwordRegister",type:"password",value:C,placeholder:"Choose a secure password",onChange:function(e){var t,n=e.target;return t=n.value,S(t),void(L(t,5)?R(!1):R(!0))}})}),A&&Object(r.jsx)(se.a.Row,{style:{color:"red"},children:"Password must be at least 5 characters long!"})]}),Object(r.jsx)(ue.a,{id:"submit-button",type:"submit",children:"Submit"}),Object(r.jsx)(ue.a,{id:"cancel-button",variant:"danger",onClick:i,children:"Cancel"})]})})]})]})},me=n(319),ge=n(318),ke=n(94),we=function(e){var t=e.name,n=e.handleCategoryDelete,a=e.owned;return Object(r.jsx)("h4",{children:Object(r.jsx)(ge.a,{pill:!0,className:"mr-2",variant:"light",children:a?Object(r.jsxs)(Y.a,{children:[Object(r.jsx)(V.a,{children:t}),Object(r.jsx)(V.a,{className:"pr-1 mb-1 text-right",children:Object(r.jsx)(ke.a,{size:20,className:"pointer",onClick:n})})]}):Object(r.jsx)(Y.a,{children:Object(r.jsx)(V.a,{children:t})})})})},ye=function(e){var t=e.avgRating;console.log("saatu rating: ".concat(t));var n=t;if(n/.5%2===1){var a=n-.5;return Object(r.jsx)("div",{children:Object(y.a)(Array(5)).map((function(e,t){return t===a?(console.log("t\xe4ss\xe4 puolikas: ".concat(t," ")),Object(r.jsx)(je.h,{size:30,color:"orange"},t)):Object(r.jsx)(je.g,{size:30,color:a>t?"orange":"gray"},t)}))})}return Object(r.jsx)("div",{children:Object(y.a)(Array(5)).map((function(e,t){return Object(r.jsx)(je.g,{size:30,color:t<n?"orange":"gray"},t)}))})},Ce=function(){var e=Object(o.c)((function(e){return e.bookInfo})),t=Object(o.c)((function(e){return e.login.token})),n=e.bookInfo,c=Object(a.useState)(!1),s=Object(ne.a)(c,2),i=s[0],u=s[1],l=Object(o.b)(),j=function(){l(function(e,t){return function(){var n=Object(d.a)(b.a.mark((function n(r){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v(e,t);case 3:return a=n.sent,n.next=6,r(A(a.data));case 6:r({type:"ADD_BOOK",data:a.data}),console.log(a.data),r(T("success","".concat(a.data.title," added to the library!"))),r({type:"NEW_BOOK_ADDED",data:{scrollToBottom:!0,highlightBook:!0,id:a.data.id}}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}(n,t)),u(!0)};return null===n?Object(r.jsx)("h2",{children:"undefined"}):i?Object(r.jsx)(le.a,{to:"/"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(me.a,{fluid:!0,children:Object(r.jsx)(Z.a,{className:"jumbo",children:Object(r.jsxs)(Y.a,{children:[Object(r.jsxs)(V.a,{xs:7,children:[Object(r.jsx)("h2",{children:n.volumeInfo.title}),Object(r.jsx)("h3",{children:n.volumeInfo.subtitle}),Object(r.jsx)("h5",{className:"pb-5",children:Object(r.jsx)("i",{children:n.volumeInfo.authors})}),void 0===n.volumeInfo.averageRating?Object(r.jsx)("h6",{children:"No reviews yet..."}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ye,{avgRating:n.volumeInfo.averageRating}),Object(r.jsx)("h6",{children:Object(r.jsxs)("i",{children:["Based on ",n.volumeInfo.ratingsCount," reviews"]})})]}),Object(r.jsx)(ue.a,{onClick:function(){return j()},children:"Add book to library"})]}),Object(r.jsx)(V.a,{xs:5,children:Object(r.jsx)("img",{src:n.volumeInfo.imageLinks.thumbnail,alt:"cover"})})]})})}),Object(r.jsx)(Z.a,{children:Object(r.jsxs)(Y.a,{children:[Object(r.jsxs)(V.a,{xs:10,className:"text-justify",children:[Object(r.jsx)("h3",{className:"pb-2",children:"Description"}),n.volumeInfo.description]}),void 0!==n.volumeInfo.categories&&Object(r.jsxs)(V.a,{xs:2,children:[Object(r.jsx)("h4",{className:"pb-2",children:"Categories"}),n.volumeInfo.categories.map((function(e){return Object(r.jsx)(we,{name:e,owned:!1},e)}))]})]})})]})},Se=function(e){var t=e.book,n=Object(o.b)(),c=Object(o.c)((function(e){return e.login.token})),s=Object(a.useState)(t.rating),i=Object(ne.a)(s,2),u=i[0],l=i[1],j=Object(a.useState)(t.rating),b=Object(ne.a)(j,2),d=b[0],O=b[1];return Object(r.jsx)("div",{children:Object(y.a)(Array(5)).map((function(e,a){var s=a+1;return Object(r.jsx)(je.g,{className:"pointer",size:30,color:d>=s?"orange":"gray",onClick:function(){return function(e){l(e),t.rating=e,n(H(t,c))}(s)},onMouseEnter:function(){return O(s)},onMouseLeave:function(){return O(u)}},a)}))})},Ne=function(e){var t=e.book,n=e.targetPageTop,a=Object(o.b)(),c=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(A(t)),n();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(xe.a,{className:"h-100 w-100",children:[Object(r.jsx)(xe.a.Body,{className:"genre",children:Object(r.jsxs)(Y.a,{children:[Object(r.jsx)(V.a,{className:"pr-0",children:Object(r.jsx)($.b,{to:"/".concat(t.title),onClick:function(){return c(t)},children:Object(r.jsx)("img",{src:t.linkToCoverImage,alt:"book cover"})})}),Object(r.jsxs)(V.a,{className:"pl-0",children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)("h5",{children:t.title})}),Object(r.jsx)(Y.a,{children:Object(r.jsx)("h6",{className:"text-muted",children:Object(r.jsxs)("i",{children:["by ",t.author]})})})]})]})}),Object(r.jsxs)(xe.a.Footer,{children:[Object(r.jsx)(Y.a,{children:Object(r.jsxs)(V.a,{className:"text-muted",children:["Date added: ",new Date(t.date).toLocaleString().split(",")[0]]})}),Object(r.jsxs)(Y.a,{className:"mb-1",children:[Object(r.jsxs)(V.a,{className:"text-left",style:{color:"green"},children:[t.read&&Object(r.jsx)(je.b,{className:"mr-1"}),t.owned&&Object(r.jsx)(je.a,{})]}),Object(r.jsx)(V.a,{className:"text-right",children:Object(r.jsx)(Se,{book:t})})]})]})]})},Ee=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.login.user_books})),n=Object(o.c)((function(e){return e.library})),c=Object(a.useState)(Object(y.a)(t)),s=Object(ne.a)(c,2),i=s[0],u=s[1],l=Object(a.useState)(!1),j=Object(ne.a)(l,2),b=j[0],d=j[1],O=Object(a.useState)(!1),h=Object(ne.a)(O,2),x=h[0],f=h[1],p=Object(a.useState)(!1),v=Object(ne.a)(p,2),m=v[0],g=v[1],k=Object(a.useState)(!1),w=Object(ne.a)(k,2),C=w[0],S=w[1],N=Object(a.useState)(!1),E=Object(ne.a)(N,2),I=E[0],T=E[1],_=Object(a.useRef)(),D=Object(a.useRef)(),A={title:"title",author:"author",rating:"rating"},R={read:"read",owned:"owned"};Object(a.useEffect)((function(){U("rating",t),B()}),[t,n]);var B=function(){void 0!==D.current&&!0===n.scrollToBottom&&(D.current.scrollIntoView({behavior:"smooth"}),e({type:"RESET_LIBRARY"}),d(!0))},L=function(){null===_.current||n.scrollToBottom||_.current.scrollIntoView()},U=function(e,t){var n=Object(y.a)(i);void 0!==t&&(n=Object(y.a)(t));var r=A[e];n.sort((function(e,t){var n=e[r],a=t[r];return"author"===r&&(n=K(e),a=K(t)),n>a?-1:n<a?1:0})),u(n)},F=function(e,t){var n=Object(y.a)(i);void 0!==t&&(n=Object(y.a)(t));var r=A[e];n.sort((function(e,t){var n=e[r],a=t[r];return"author"===r&&(n=K(e),a=K(t)),n>a?1:n<a?-1:0})),u(n)},K=function(e){var t=e.author.split(" ");return t[t.length-1]},q=function(e,t,n){var r=[],a=R[t];if(e){for(var c=0;c<n.length;c++)n[c][a]&&r.push(n[c]);return r}for(var s=0;s<n.length;s++)n[s][a]||r.push(n[s]);return r};return Object(r.jsxs)(Z.a,{fluid:!0,className:"bookshelf",children:[Object(r.jsx)("div",{ref:_}),Object(r.jsx)(he,{showSort:!0,sortDesc:U,sortAsc:F,filterBooks:function(e,n,r,a,c){var s=Object(y.a)(t);switch(e&&(s=q(!0,"owned",s)),n&&(s=q(!0,"read",s)),r&&(s=q(!1,"owned",s)),a&&(s=q(!1,"read",s)),c){case"Rating Desc":U("rating",s);break;case"Rating Asc":F("rating",s);break;case"Title Asc":F("title",s);break;case"Title Desc":U("title",s);break;case"Author Asc":F("author",s);break;case"Author Desc":U("author",s)}},read:m,setRead:g,unread:I,setUnread:T,owned:x,setOwned:f,notOwned:C,setNotOwned:S}),Object(r.jsx)(Y.a,{children:!0===b&&Object(r.jsx)(pe,{setShowAlert:d})}),Object(r.jsx)(Y.a,{className:"library",children:i.map((function(e){return Object(r.jsx)(V.a,{sm:12,md:6,xl:4,className:"pt-3",children:Object(r.jsx)(Ne,{book:e,targetPageTop:L})},e.id)}))}),Object(r.jsx)("div",{ref:D})]})},Ie=n(167),Te=n(325),_e=n(320),De=function(e){var t=e.setShow,n=e.openColor,c=e.handleColorOpen,s=Object(o.c)((function(e){return e.ownedBook.bookInfo})),i=Object(o.c)((function(e){return e.login.token})),u=Object(a.useState)(s.review),l=Object(ne.a)(u,2),j=l[0],O=l[1],h=Object(a.useState)(!1),x=Object(ne.a)(h,2),f=x[0],p=x[1],v=Object(a.useState)(!1),m=Object(ne.a)(v,2),g=m[0],k=m[1],w=Object(a.useState)(null),y=Object(ne.a)(w,2),S=y[0],N=y[1],E=Object(a.useState)(!1),I=Object(ne.a)(E,2),T=I[0],_=I[1],D=Object(a.useState)(null),A=Object(ne.a)(D,2),R=A[0],B=A[1],L=Object(o.b)();Object(a.useEffect)((function(){O(s.review)}),[s]);var U=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=Object(C.a)(Object(C.a)({},s),{},{review:j}),L(H(n,i)),p(!1),k(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),L(F(s.id,S,i)),k(!1),N(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.quotes,r=0;case 2:if(!(r<n.length)){e.next=9;break}if(n[r].id!==t){e.next=6;break}return n.splice(r,1),e.abrupt("break",9);case 6:r++,e.next=2;break;case 9:a=Object(C.a)(Object(C.a)({},s),{},{quotes:n}),L(H(a,i));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=Object(C.a)(Object(C.a)({},s),{},{categories:s.categories.concat(R)}),L(H(n,i)),_(!1),B(null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.categories,r=0;case 2:if(!(r<n.length)){e.next=9;break}if(n[r]!==t){e.next=6;break}return n.splice(r,1),e.abrupt("break",9);case 6:r++,e.next=2;break;case 9:a=Object(C.a)(Object(C.a)({},s),{},{categories:n}),L(H(a,i));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(Te.a,{children:[Object(r.jsx)(_e.a,{eventKey:"review",title:"Review",children:f?Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{sm:12,md:2,children:Object(r.jsx)(ue.a,{variant:"secondary",onClick:function(){return p(!f)},children:"Cancel"})}),Object(r.jsx)(V.a,{sm:12,md:10,children:Object(r.jsxs)(se.a,{onSubmit:U,children:[Object(r.jsx)(se.a.Group,{children:Object(r.jsx)(se.a.Control,{as:"textarea",rows:10,value:j,onChange:function(e){return O(e.target.value)}})}),Object(r.jsx)(ue.a,{type:"submit",className:"mr-1",children:"Save changes"})]})})]}):Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{xs:12,sm:2,children:Object(r.jsx)(ue.a,{variant:"link",onClick:function(){return p(!f)},children:"Edit"})}),Object(r.jsx)(V.a,{xs:12,sm:10,children:j})]})}),Object(r.jsx)(_e.a,{eventKey:"quotes",title:"Quotes",children:g?Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{sm:12,md:2,children:Object(r.jsx)(ue.a,{variant:"secondary",onClick:function(){return k(!g)},children:"Cancel"})}),Object(r.jsx)(V.a,{sm:12,md:10,children:Object(r.jsxs)(se.a,{onSubmit:K,children:[Object(r.jsx)(se.a.Group,{children:Object(r.jsx)(se.a.Control,{as:"textarea",rows:8,onChange:function(e){return N(e.target.value)},placeholder:"Write your quote here."})}),Object(r.jsx)(ue.a,{type:"submit",className:"mr-1",children:"Save quote"})]})})]}):Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{xs:12,sm:2,children:Object(r.jsx)(ue.a,{variant:"link",onClick:function(){return k(!g)},children:Object(r.jsx)(je.d,{size:35})})}),Object(r.jsx)(V.a,{xs:12,sm:10,children:s.quotes.map((function(e){return Object(r.jsx)(Y.a,{className:"mb-3 mt-3",children:Object(r.jsx)(V.a,{children:Object(r.jsxs)(xe.a,{children:[Object(r.jsx)(xe.a.Header,{children:Object(r.jsx)(Y.a,{children:Object(r.jsx)(V.a,{className:"pr-0 text-right",children:Object(r.jsx)(ke.a,{className:"pointer",onClick:function(){return q(e.id)}})})})}),Object(r.jsx)(xe.a.Body,{className:"overflow-auto",children:Object(r.jsxs)("i",{children:[" ",e.quote]})})]})},e.id)})}))})]})}),Object(r.jsx)(_e.a,{eventKey:"categories",title:"Categories",children:T?Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{sm:12,md:2,children:Object(r.jsx)(ue.a,{variant:"secondary",onClick:function(){return _(!T)},children:"Cancel"})}),Object(r.jsx)(V.a,{sm:12,md:10,children:Object(r.jsxs)(se.a,{onSubmit:W,children:[Object(r.jsx)(se.a.Group,{children:Object(r.jsx)(se.a.Control,{type:"input",onChange:function(e){return B(e.target.value)}})}),Object(r.jsx)(ue.a,{type:"submit",className:"mr-1",children:"Save category"})]})})]}):Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{xs:12,sm:2,children:Object(r.jsx)(ue.a,{variant:"link",onClick:function(){return _(!T)},children:Object(r.jsx)(je.d,{size:35})})}),Object(r.jsx)(V.a,{xs:12,sm:10,className:"mt-3",children:Object(r.jsx)(Z.a,{children:Object(r.jsx)(Y.a,{children:s.categories.map((function(e){return Object(r.jsx)(we,{name:e,handleCategoryDelete:function(){return z(e)},owned:!0},e)}))})})})]})}),Object(r.jsxs)(_e.a,{eventKey:"options",title:"Options",children:[Object(r.jsx)(Y.a,{className:"pt-3",children:Object(r.jsx)(V.a,{children:n?Object(r.jsx)(ue.a,{variant:"link",onClick:function(){return c()},children:"Close"}):Object(r.jsx)(ue.a,{variant:"link",onClick:function(){return c()},children:"Change background color"})})}),Object(r.jsx)(Y.a,{children:Object(r.jsx)(V.a,{children:Object(r.jsx)(ue.a,{variant:"link",style:{color:"red"},onClick:function(){return t(!0)},children:"Delete Book"})})})]})]})},Ae=function(e){var t=e.show,n=e.setShow,a=e.book,c=e.handleDelete;return Object(r.jsxs)(be.a,{show:t,onHide:function(){return n(!1)},backdrop:"static",keyboard:!1,children:[Object(r.jsx)(be.a.Header,{closeButton:!0,children:Object(r.jsx)(be.a.Title,{children:"Warning"})}),Object(r.jsxs)(be.a.Body,{children:[Object(r.jsxs)("b",{children:["Delete ",a.title," by ",a.author]})," from the library?"]}),Object(r.jsxs)(be.a.Footer,{children:[Object(r.jsx)(ue.a,{className:"mr-1",variant:"danger",onClick:c,children:"Delete"}),Object(r.jsx)(ue.a,{variant:"secondary",onClick:function(){return n(!1)},children:"Cancel"})]})]})},Re=function(){var e=Object(o.c)((function(e){return e.ownedBook.bookInfo})),t=Object(o.c)((function(e){return e.login.token})),n=Object(a.useState)((function(){return null===e?null:e.read})),c=Object(ne.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)((function(){return null===e?null:e.owned})),l=Object(ne.a)(u,2),j=l[0],O=l[1],h=Object(a.useState)((function(){return null===e?null:e.color})),x=Object(ne.a)(h,2),f=x[0],p=x[1],v=Object(a.useState)(!1),m=Object(ne.a)(v,2),g=m[0],k=m[1],w=Object(a.useState)(!1),y=Object(ne.a)(w,2),S=y[0],N=y[1],E=Object(o.b)();Object(a.useEffect)((function(){null!==e&&(i(e.read),O(e.owned))}),[e]);var I=function(){var n=Object(d.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:E(W(e.id,t)),k(!1);case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),T={backgroundColor:f,transition:"ease all 300ms"};return null===e?Object(r.jsx)(le.a,{to:"/"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(me.a,{fluid:!0,style:T,children:Object(r.jsxs)(Z.a,{className:"jumbo",children:[Object(r.jsxs)(Y.a,{children:[Object(r.jsxs)(V.a,{xs:7,children:[Object(r.jsx)("h1",{children:e.title}),Object(r.jsx)("h5",{children:Object(r.jsx)("i",{children:e.author})}),Object(r.jsx)(Se,{book:e}),Object(r.jsxs)(se.a,{className:"pt-3",children:[Object(r.jsx)(se.a.Check,{inline:!0,type:"checkbox",id:"read",label:"Read",checked:s,onChange:function(){var n=Object(C.a)(Object(C.a)({},e),{},{read:!e.read});i(!e.read),E(H(n,t))}}),Object(r.jsx)(se.a.Check,{inline:!0,type:"checkbox",id:"owned",label:"Owned",checked:j,onChange:function(){var n=Object(C.a)(Object(C.a)({},e),{},{owned:!e.owned});O(!e.owned),E(H(n,t))}})]})]}),Object(r.jsx)(V.a,{xs:5,children:Object(r.jsx)("img",{src:e.linkToCoverImage,alt:"cover"})})]}),Object(r.jsx)("span",{className:"float-right",children:S&&Object(r.jsx)(Ie.a,{color:f,onChangeComplete:function(n){return function(n){console.log(n),p(n);var r=Object(C.a)(Object(C.a)({},e),{},{color:n});console.log(r),E(H(r,t))}(n.hex)}})})]})}),Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(Ae,{show:g,setShow:k,book:e,handleDelete:I}),Object(r.jsx)(Y.a,{children:Object(r.jsx)(V.a,{xs:9,children:Object(r.jsx)(De,{setShow:k,openColor:S,handleColorOpen:function(){N(!S)}})})})]})]})},Be=function(){return null===Object(o.c)((function(e){return e.login.user}))?Object(r.jsx)(ve,{}):Object(r.jsx)($.a,{children:Object(r.jsxs)(le.d,{children:[Object(r.jsxs)(le.b,{path:"/search/:etag",children:[Object(r.jsx)(he,{showSort:!1}),Object(r.jsx)(Ce,{})]}),Object(r.jsxs)(le.b,{path:"/search",children:[Object(r.jsx)(he,{showSort:!1}),Object(r.jsx)(te,{})]}),Object(r.jsxs)(le.b,{path:"/:title",children:[Object(r.jsx)(he,{showSort:!1}),Object(r.jsx)(Re,{})]}),Object(r.jsx)(le.b,{path:"/",children:Object(r.jsx)(Ee,{})})]})})};s.a.render(Object(r.jsx)(o.a,{store:M,children:Object(r.jsx)(Be,{})}),document.getElementById("root"))},41:function(e,t,n){}},[[304,1,2]]]);
//# sourceMappingURL=main.ca5f6c0e.chunk.js.map