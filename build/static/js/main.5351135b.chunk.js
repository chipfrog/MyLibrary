(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{129:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(1),c=n(25),s=n.n(c),o=n(9),i=n(42),u=n(94),l=n(95),j=n(8),b=n.n(j),d=n(10),O=n(22),h=n.n(O),x=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,console.log("Filtteri: ".concat(t)),console.log("Hakusanat: ".concat(n)),a=t.toLowerCase(),"Filter by"===t){e.next=10;break}return e.next=7,h.a.get("/api/googlebooks/in".concat(a,":").concat(n));case 7:r=e.sent,e.next=13;break;case 10:return e.next=12,h.a.get("/api/googlebooks/".concat(n));case 12:r=e.sent;case 13:return console.log(r.data),e.abrupt("return",r.data);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="bearer ".concat(n),a={headers:{Authorization:r}},c={id:t.id,review:t.review,rating:t.rating,read:t.read,owned:t.owned,quotes:t.quotes,categories:t.categories},e.next=5,h.a.put("/api/googleBooks/edit",c,a);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(b.a.mark((function e(t,n,r){var a,c,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="bearer ".concat(r),c={headers:{Authorization:a}},s={book_id:t,quote:n},e.next=5,h.a.post("/api/googleBooks/addquote",s,c);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="bearer ".concat(n),a={headers:{Authorization:r}},c={date:new Date,title:t.volumeInfo.title,author:t.volumeInfo.authors[0],linkToCoverImage:t.volumeInfo.imageLinks.thumbnail,review:t.review,rating:t.rating,read:t.read,quotes:t.quotes,categories:t.volumeInfo.categories},e.next=5,h.a.post("/api/googlebooks",c,a);case 5:return s=e.sent,console.log("Lis\xe4tty kirja: ".concat(s.data.title)),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="bearer ".concat(n),a={headers:{Authorization:r}},e.next=4,h.a.delete("/api/googlebooks/delete",{data:{config:a,id:t}});case 4:c=e.sent,console.log(c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g={books:[],filter:void 0,searching:!1},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_SEARCH":return{books:t.data.books,filter:t.data.filter,searching:!1};case"SEARCH_STARTED":return{books:[],filter:void 0,searching:!0};case"INIT_SEARCH_RESULTS":return t.data;default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOK_INFO":return t.data;case"RESET_BOOK_INFO":return null;default:return e}},y=n(30),S=n(14),N=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/user",t);case 2:return n=e.sent,console.log("User creation: ".concat(n.data)),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="bearer ".concat(t),console.log("poisto frontissa"),console.log(n),r={headers:{Authorization:n}},e.next=6,h.a.delete("/api/user/delete",{data:{config:r}});case 6:a=e.sent,console.log(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I={type:null,show:!1,message:""},T=function(e,t){return{type:"SET_NOTIFICATION",data:{type:e,show:!0,message:t}}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":case"RESET_NOTIFICATION":return t.data;default:return e}},D={bookInfo:null},R=function(e){return{type:"SET_OWNED_BOOK_INFO",data:{bookInfo:e}}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_OWNED_BOOK_INFO":case"RESET_OWNED_BOOK_INFO":return t.data;default:return e}},A={scrollToBottom:!1,highlightBook:!1,id:null},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_BOOK_ADDED":return t.data;case"RESET_LIBRARY":return A;default:return e}},F={user:null},U=function(e,t,n){return function(){var r=Object(d.a)(b.a.mark((function r(a){var c;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p(e,t,n);case 3:return c=r.sent,r.next=6,a(R(c.data));case 6:a({type:"ADD_QUOTE",data:c.data}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},K=function(e){var t=e.newUsername,n=e.newPassword;return function(){var e=Object(d.a)(b.a.mark((function e(r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C({newUsername:t,newPassword:n});case 3:r({type:"CREATE_USER",data:F}),r(T("success","User was successfully created!")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(T("danger",e.t0.response.data.error));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},H=function(e){var t=e.username,n=e.password;return function(){var e=Object(d.a)(b.a.mark((function e(r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N({username:t,password:n});case 3:a=e.sent,r({type:"LOGIN",data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(T("danger",e.t0.response.data.error));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},q=function(e,t){return function(){var n=Object(d.a)(b.a.mark((function n(r){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f(e,t);case 3:return a=n.sent,n.next=6,r(R(a.data));case 6:r({type:"UPDATE_BOOK",data:e}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},z=function(e,t){return function(){var n=Object(d.a)(b.a.mark((function n(r){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m(e,t);case 3:return n.next=5,r((console.log("reseting book..."),{type:"RESET_OWNED_BOOK_INFO",data:D}));case 5:r({type:"DELETE_BOOK",data:e}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"LOGOUT":case"CREATE_USER":return t.data;case"DELETE_USER":return F;case"ADD_BOOK":return Object(S.a)(Object(S.a)({},e),{},{user_books:[].concat(Object(y.a)(e.user_books),[t.data])});case"UPDATE_BOOK":return Object(S.a)(Object(S.a)({},e),{},{user_books:e.user_books.map((function(e){return e.id===t.data.id?Object(S.a)(Object(S.a)({},e),{},{rating:t.data.rating,review:t.data.review,quotes:t.data.quotes,categories:t.data.categories,read:t.data.read,owned:t.data.owned}):e}))});case"DELETE_BOOK":return Object(S.a)(Object(S.a)({},e),{},{user_books:e.user_books.filter((function(e){return e.id!==t.data}))});case"ADD_QUOTE":return Object(S.a)(Object(S.a)({},e),{},{user_books:e.user_books.map((function(e){return e.id===t.data.id?Object(S.a)(Object(S.a)({},e),{},{quotes:t.data.quotes}):e}))});case"RESET":return F;default:return e}},P=Object(i.combineReducers)({bookSearch:k,bookInfo:w,ownedBook:B,login:G,notification:_,library:L}),W=function(){try{var e=localStorage.getItem("userState");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),J=Object(i.createStore)(P,W,Object(l.composeWithDevTools)(Object(i.applyMiddleware)(u.a)));J.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("userState",t)}catch(n){return}}(J.getState())}));var M=J,Z=n(135),Q=n(136),Y=n(137),V=n(96),X=n(134),$=n(29),ee=function(e){var t=e.info,n=Object(o.b)(),a=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:"SET_BOOK_INFO",data:{bookInfo:t}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)("p",{children:Object(r.jsx)($.b,{to:"/search/".concat(t.etag),children:Object(r.jsx)(X.a,{src:t.volumeInfo.imageLinks.thumbnail,onClick:function(){return a()}})})})},te=function(){for(var e=Object(o.c)((function(e){return e.bookSearch})),t=Object.keys(e.books).length,n=[],a=0,c=0,s=0,i=0;i<t;i++)c%6||(n[++a]=[]),void 0!==e.books[i].volumeInfo.imageLinks&&(n[a].push(e.books[i]),c++);return Object(r.jsx)(Z.a,{fluid:!0,className:"pt-3",children:e.searching?Object(r.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(r.jsx)(Q.a,{animation:"border",variant:"info"})}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("h3",{className:"text-center pb-5",children:["Search results for ",Object(r.jsxs)("i",{children:['"',e.filter,'"']})]}),n.map((function(e){return Object(r.jsx)(Y.a,{className:"text-center",children:e.map((function(e){return Object(r.jsx)(V.a,{sm:6,md:4,lg:2,children:Object(r.jsx)(ee,{info:e},e.etag)},e.etag)}))},s++)}))]})})},ne=n(12),re=n(147),ae=n(98),ce=n(138),se=n(146),oe=n(139),ie=n(140),ue=n(97),le=n(16),je=n(18),be=(n(36),n(145)),de=function(e){var t=e.show,n=e.setShow,a=e.handleDelete;return Object(r.jsxs)(be.a,{show:t,onHide:function(){return n(!1)},backdrop:"static",keyboard:!1,children:[Object(r.jsx)(be.a.Header,{closeButton:!0,children:Object(r.jsx)(be.a.Title,{children:"Warning"})}),Object(r.jsx)(be.a.Body,{children:Object(r.jsx)(Y.a,{children:Object(r.jsx)("b",{children:"Do you want delete your account and all your books? This action cannot be reversed."})})}),Object(r.jsxs)(be.a.Footer,{children:[Object(r.jsx)(ue.a,{className:"mr-1",variant:"danger",onClick:a,children:"Delete my account"}),Object(r.jsx)(ue.a,{variant:"secondary",onClick:function(){return n(!1)},children:"Cancel"})]})]})},Oe=n(52),he=function(e){var t=e.showSort,n=e.sortDesc,c=e.sortAsc,s=Object(o.b)(),i=Object(le.g)(),u=Object(o.c)((function(e){return e.login.token})),l=Object(a.useState)("Filter by"),j=Object(ne.a)(l,2),O=j[0],h=j[1],f=Object(a.useState)(!1),p=Object(ne.a)(f,2),v=p[0],m=p[1],k=function(){document.getElementById("search bar").reset()},w=Object(r.jsx)(je.b,{size:35});je.a;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(re.a,{className:"navigation",fixed:"top",bg:"dark",variant:"dark",children:[Object(r.jsx)(re.a.Brand,{as:$.b,to:"/",children:"My Library"}),Object(r.jsxs)(ae.a,{className:"mr-auto",children:[t&&Object(r.jsxs)(ce.a,{className:"ml-auto",title:"Sort by",id:"basic-nav-dropdown",children:[Object(r.jsx)(ce.a.Item,{onClick:function(){return n("rating")},children:"Rating: Highest-Lowest"}),Object(r.jsx)(ce.a.Item,{onClick:function(){return c("rating")},children:"Rating: Lowest-Highest"}),Object(r.jsx)(ce.a.Item,{onClick:function(){return c("title")},children:"Title: A-Z"}),Object(r.jsx)(ce.a.Item,{onClick:function(){return n("title")},children:"Title: Z-A"}),Object(r.jsx)(ce.a.Item,{onClick:function(){return c("author")},children:"Author: A-Z"}),Object(r.jsx)(ce.a.Item,{onClick:function(){return n("author")},children:"Author: Z-A"})]}),Object(r.jsx)(ae.a.Link,{as:$.b,to:"/search",children:"Book finder"})]}),Object(r.jsxs)(ae.a,{className:"ml-auto",children:[Object(r.jsx)(se.a,{className:"mr-5",onSubmit:function(e){e.preventDefault();var t=e.target.searchWords.value;s({type:"SEARCH_STARTED"}),i.push("/search"),s(function(e,t){return console.log(t),function(){var n=Object(d.a)(b.a.mark((function n(r){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x(e,t);case 2:a=n.sent,r({type:"BOOK_SEARCH",data:{books:a,filter:e}});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(O,t)),k()},inline:!0,id:"search bar",children:Object(r.jsxs)(oe.a,{children:[Object(r.jsxs)(ie.a,{variant:"secondary",title:O,children:[Object(r.jsx)(Oe.a,{onClick:function(){return h("Filter by")},children:"No filter"}),Object(r.jsx)(Oe.a,{onClick:function(){return h("Title")},children:"Title"}),Object(r.jsx)(Oe.a,{onClick:function(){return h("Author")},children:"Author"})]}),Object(r.jsx)(se.a.Control,{name:"searchWords",type:"text",placeholder:"Search from Google Books"}),Object(r.jsx)(ue.a,{type:"submit",children:Object(r.jsx)(je.d,{})})]})}),Object(r.jsxs)(ce.a,{alignRight:!0,title:w,children:[Object(r.jsx)(ce.a.Item,{onClick:function(){s({type:"INIT_SEARCH_RESULTS",data:g}),s({type:"LOGOUT",data:F}),i.push("/")},children:Object(r.jsx)(Y.a,{children:Object(r.jsxs)(V.a,{children:[Object(r.jsx)("span",{className:"mr-2",children:"Logout"}),Object(r.jsx)(je.e,{})]})})}),Object(r.jsx)(ce.a.Divider,{}),Object(r.jsx)(ce.a.Item,{className:"text-danger",onClick:function(){return m(!0)},children:Object(r.jsx)(Y.a,{children:Object(r.jsxs)(V.a,{children:[Object(r.jsx)("span",{className:"mr-2",children:"Delete Account"}),Object(r.jsx)(je.h,{})]})})})]})]})]}),Object(r.jsx)(Z.a,{children:Object(r.jsx)(de,{show:v,setShow:m,handleDelete:function(){s(function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E(e);case 3:n({type:"DELETE_USER"}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(u))}})})]})},xe=n(148),fe=n(141),pe=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notification}));return null!==t&&t.show?(setTimeout((function(){e({type:"RESET_NOTIFICATION",data:{type:null,show:!1,message:""}})}),3e3),Object(r.jsxs)(fe.a,{className:"notification",variant:t.type,onClose:function(){e({type:"RESET_NOTIFICATION",data:{type:null,show:!1,message:""}})},dismissible:!0,children:[Object(r.jsx)(fe.a.Heading,{children:"danger"===t.type?Object(r.jsx)("strong",{children:"Oops!"}):Object(r.jsx)("strong",{children:"You're awesome!"})}),Object(r.jsx)("p",{children:t.message})]})):null},ve=function(){var e=Object(o.b)(),t=Object(a.useState)(!1),n=Object(ne.a)(t,2),c=n[0],s=n[1],i=function(){s(!1),k(""),N(""),T(!1),B(!1)},u=Object(a.useState)(""),l=Object(ne.a)(u,2),j=l[0],O=l[1],h=Object(a.useState)(""),x=Object(ne.a)(h,2),f=x[0],p=x[1],v=Object(a.useState)(""),m=Object(ne.a)(v,2),g=m[0],k=m[1],w=Object(a.useState)(""),y=Object(ne.a)(w,2),S=y[0],N=y[1],C=Object(a.useState)(!1),E=Object(ne.a)(C,2),I=E[0],T=E[1],_=Object(a.useState)(!1),D=Object(ne.a)(_,2),R=D[0],B=D[1],A=function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e(H({username:j,password:f})),O(""),p("");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(e,t){return e.length>=t},F=function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),L(g,5)||T(!0),L(S,5)?(console.log("Username: ".concat(g,", Password: ").concat(S)),e(K({newUsername:g,newPassword:S})),i()):B(!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)(Z.a,{fluid:!0,className:"login_screen",children:[Object(r.jsx)(pe,{className:"notify"}),Object(r.jsxs)(xe.a,{className:"card",bg:"light",border:"dark",children:[Object(r.jsx)(xe.a.Header,{className:"text-center",children:Object(r.jsx)("h2",{children:"Login"})}),Object(r.jsx)(xe.a.Body,{children:Object(r.jsxs)(se.a,{onSubmit:A,children:[Object(r.jsxs)(se.a.Group,{controlId:"formBasicText",children:[Object(r.jsx)(se.a.Label,{children:"Username"}),Object(r.jsx)(se.a.Control,{type:"text",name:"usernameLogin",value:j,placeholder:"Username",onChange:function(e){var t=e.target;return O(t.value)}})]}),Object(r.jsxs)(se.a.Group,{controlId:"formBasicPassword",children:[Object(r.jsx)(se.a.Label,{children:"Password"}),Object(r.jsx)(se.a.Control,{type:"password",name:"passwordLogin",value:f,placeholder:"Password",onChange:function(e){var t=e.target;return p(t.value)}})]}),Object(r.jsx)(ue.a,{variant:"primary",type:"submit",children:"Login"})," ",Object(r.jsx)(ue.a,{variant:"success",onClick:function(){return s(!0)},children:"Create User"})]})})]}),Object(r.jsxs)(be.a,{show:c,onHide:i,backdrop:"static",keyboard:!1,children:[Object(r.jsx)(be.a.Header,{closeButton:!0,children:Object(r.jsx)(be.a.Title,{children:"Register new user"})}),Object(r.jsx)(be.a.Body,{children:Object(r.jsxs)(se.a,{onSubmit:F,children:[Object(r.jsxs)(se.a.Group,{children:[Object(r.jsx)(se.a.Row,{children:Object(r.jsx)(se.a.Label,{children:"Username"})}),Object(r.jsx)(se.a.Row,{children:Object(r.jsx)(se.a.Control,{type:"text",name:"usernameRegister",value:g,placeholder:"Choose your username",onChange:function(e){var t,n=e.target;return t=n.value,k(t),void(L(t,5)?T(!1):T(!0))}})}),I&&Object(r.jsx)(se.a.Row,{style:{color:"red"},children:"Username must be at least 5 characters long!"})]}),Object(r.jsxs)(se.a.Group,{children:[Object(r.jsx)(se.a.Row,{children:Object(r.jsx)(se.a.Label,{children:"Password"})}),Object(r.jsx)(se.a.Row,{children:Object(r.jsx)(se.a.Control,{type:"password",name:"passwordRegister",value:S,placeholder:"Choose a secure password",onChange:function(e){var t,n=e.target;return t=n.value,N(t),void(L(t,5)?B(!1):B(!0))}})}),R&&Object(r.jsx)(se.a.Row,{style:{color:"red"},children:"Password must be at least 5 characters long!"})]}),Object(r.jsxs)(se.a.Group,{as:Y.a,children:[Object(r.jsx)(V.a,{xs:3,children:Object(r.jsx)(ue.a,{type:"submit",children:"Submit"})}),Object(r.jsx)(V.a,{xs:3,children:Object(r.jsx)(ue.a,{variant:"danger",onClick:i,children:"Cancel"})})]})]})})]})]})},me=n(143),ge=n(142),ke=n(72),we=function(e){var t=e.name,n=e.handleCategoryDelete,a=e.owned;return Object(r.jsx)("h4",{children:Object(r.jsx)(ge.a,{pill:!0,className:"mr-2",variant:"success",children:a?Object(r.jsxs)(Y.a,{children:[Object(r.jsx)(V.a,{children:t}),Object(r.jsx)(V.a,{className:"pr-1 mb-1 text-right",children:Object(r.jsx)(ke.a,{size:20,className:"pointer",onClick:n})})]}):Object(r.jsx)(Y.a,{children:Object(r.jsx)(V.a,{children:t})})})})},ye=function(e){var t=e.avgRating;console.log("saatu rating: ".concat(t));var n=t;if(n/.5%2===1){var a=n-.5;return Object(r.jsx)("div",{children:Object(y.a)(Array(5)).map((function(e,t){return t===a?(console.log("t\xe4ss\xe4 puolikas: ".concat(t," ")),Object(r.jsx)(je.g,{size:30,color:"orange"},t)):Object(r.jsx)(je.f,{size:30,color:a>t?"orange":"gray"},t)}))})}return Object(r.jsx)("div",{children:Object(y.a)(Array(5)).map((function(e,t){return Object(r.jsx)(je.f,{size:30,color:t<n?"orange":"gray"},t)}))})},Se=function(){var e=Object(o.c)((function(e){return e.bookInfo})),t=Object(o.c)((function(e){return e.login.token})),n=e.bookInfo,c=Object(a.useState)(!1),s=Object(ne.a)(c,2),i=s[0],u=s[1],l=Object(o.b)(),j=function(){l(function(e,t){return function(){var n=Object(d.a)(b.a.mark((function n(r){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v(e,t);case 3:return a=n.sent,n.next=6,r(R(a.data));case 6:r({type:"ADD_BOOK",data:a.data}),console.log(a.data),r(T("success","".concat(a.data.title," added to the library!"))),r({type:"NEW_BOOK_ADDED",data:{scrollToBottom:!0,highlightBook:!0,id:a.data.id}}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}(n,t)),u(!0)};return null===n?Object(r.jsx)("h2",{children:"undefined"}):i?Object(r.jsx)(le.a,{to:"/"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(me.a,{fluid:!0,children:Object(r.jsx)(Z.a,{className:"jumbo",children:Object(r.jsxs)(Y.a,{children:[Object(r.jsxs)(V.a,{xs:7,children:[Object(r.jsx)("h2",{children:n.volumeInfo.title}),Object(r.jsx)("h3",{children:n.volumeInfo.subtitle}),Object(r.jsx)("h5",{className:"pb-5",children:Object(r.jsx)("i",{children:n.volumeInfo.authors})}),void 0===n.volumeInfo.averageRating?Object(r.jsx)("h6",{children:"No reviews yet..."}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ye,{avgRating:n.volumeInfo.averageRating}),Object(r.jsx)("h6",{children:Object(r.jsxs)("i",{children:["Based on ",n.volumeInfo.ratingsCount," reviews"]})})]}),Object(r.jsx)(ue.a,{onClick:function(){return j()},children:"Add book to library"})]}),Object(r.jsx)(V.a,{xs:5,children:Object(r.jsx)("img",{src:n.volumeInfo.imageLinks.thumbnail,alt:"cover"})})]})})}),Object(r.jsx)(Z.a,{children:Object(r.jsxs)(Y.a,{children:[Object(r.jsxs)(V.a,{xs:10,className:"text-justify",children:[Object(r.jsx)("h3",{className:"pb-2",children:"Description"}),n.volumeInfo.description]}),void 0!==n.volumeInfo.categories&&Object(r.jsxs)(V.a,{xs:2,children:[Object(r.jsx)("h4",{className:"pb-2",children:"Categories"}),n.volumeInfo.categories.map((function(e){return Object(r.jsx)(we,{name:e,owned:!1},e)}))]})]})})]})},Ne=function(e){var t=e.book,n=Object(o.b)(),c=Object(o.c)((function(e){return e.login.token})),s=Object(a.useState)(t.rating),i=Object(ne.a)(s,2),u=i[0],l=i[1],j=Object(a.useState)(t.rating),b=Object(ne.a)(j,2),d=b[0],O=b[1];return Object(r.jsx)("div",{children:Object(y.a)(Array(5)).map((function(e,a){var s=a+1;return Object(r.jsx)(je.f,{className:"pointer",size:30,color:d>=s?"orange":"gray",onClick:function(){return function(e){l(e),t.rating=e,n(q(t,c))}(s)},onMouseEnter:function(){return O(s)},onMouseLeave:function(){return O(u)}},a)}))})},Ce=function(e){var t=e.book,n=e.targetPageTop,a=Object(o.b)();return Object(r.jsxs)(xe.a,{className:"h-100 w-100",children:[Object(r.jsx)(xe.a.Body,{className:"genre",children:Object(r.jsxs)(Y.a,{children:[Object(r.jsx)(V.a,{className:"pr-0",children:Object(r.jsx)($.b,{to:"/".concat(t.title),onClick:function(){return a(R(t)),void n()},children:Object(r.jsx)("img",{src:t.linkToCoverImage,alt:"book cover"})})}),Object(r.jsxs)(V.a,{className:"pl-0",children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)("h5",{children:t.title})}),Object(r.jsx)(Y.a,{children:Object(r.jsx)("h6",{className:"text-muted",children:Object(r.jsxs)("i",{children:["by ",t.author]})})})]})]})}),Object(r.jsx)(xe.a.Footer,{children:Object(r.jsxs)(Y.a,{children:[Object(r.jsxs)(V.a,{className:"text-muted",children:["Date added: ",new Date(t.date).toLocaleString().split(",")[0]]}),Object(r.jsx)(V.a,{children:Object(r.jsx)(Ne,{className:"ml-auto",book:t})})]})})]})},Ee=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.login.user_books})),n=Object(o.c)((function(e){return e.library})),c=Object(a.useState)(Object(y.a)(t)),s=Object(ne.a)(c,2),i=s[0],u=s[1],l=Object(a.useState)(!1),j=Object(ne.a)(l,2),b=j[0],d=j[1],O=Object(a.useRef)(),h=Object(a.useRef)();Object(a.useEffect)((function(){v("rating"),x()}),[t,n]);var x=function(){void 0!==h.current&&!0===n.scrollToBottom&&(h.current.scrollIntoView({behavior:"smooth"}),e({type:"RESET_LIBRARY"}),d(!0))},f=function(){null===O.current||n.scrollToBottom||O.current.scrollIntoView()},p={title:"title",author:"author",rating:"rating"},v=function(e){var n=p[e],r=Object(y.a)(t);r.sort((function(e,t){return e[n]>t[n]?-1:e[n]<t[n]?1:0})),u(r)};return Object(r.jsxs)(Z.a,{fluid:!0,className:"bookshelf",children:[Object(r.jsx)("div",{ref:O}),Object(r.jsx)(he,{showSort:!0,sortDesc:v,sortAsc:function(e){var n=p[e],r=Object(y.a)(t);r.sort((function(e,t){return e[n]>t[n]?1:e[n]<t[n]?-1:0})),u(r)}}),Object(r.jsx)(Y.a,{children:!0===b&&Object(r.jsx)(pe,{setShowAlert:d})}),Object(r.jsx)(Y.a,{className:"library",children:i.map((function(e){return Object(r.jsx)(V.a,{sm:12,md:6,xl:4,className:"pt-3",children:Object(r.jsx)(Ce,{book:e,targetPageTop:f})},e.id)}))}),Object(r.jsx)("div",{ref:h})]})},Ie=n(149),Te=n(144),_e=function(e){var t=e.setShow,n=Object(o.c)((function(e){return e.ownedBook.bookInfo})),c=Object(o.c)((function(e){return e.login.token})),s=Object(a.useState)(n.review),i=Object(ne.a)(s,2),u=i[0],l=i[1],j=Object(a.useState)(!1),O=Object(ne.a)(j,2),h=O[0],x=O[1],f=Object(a.useState)(!1),p=Object(ne.a)(f,2),v=p[0],m=p[1],g=Object(a.useState)(null),k=Object(ne.a)(g,2),w=k[0],y=k[1],N=Object(a.useState)(!1),C=Object(ne.a)(N,2),E=C[0],I=C[1],T=Object(a.useState)(null),_=Object(ne.a)(T,2),D=_[0],R=_[1],B=Object(o.b)();Object(a.useEffect)((function(){l(n.review)}),[n]);var A=function(){var e=Object(d.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=Object(S.a)(Object(S.a)({},n),{},{review:u}),B(q(r,c)),x(!1),m(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),B(U(n.id,w,c)),m(!1),y(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(b.a.mark((function e(t){var r,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.quotes,a=0;case 2:if(!(a<r.length)){e.next=9;break}if(r[a].id!==t){e.next=6;break}return r.splice(a,1),e.abrupt("break",9);case 6:a++,e.next=2;break;case 9:s=Object(S.a)(Object(S.a)({},n),{},{quotes:r}),B(q(s,c));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=Object(S.a)(Object(S.a)({},n),{},{categories:n.categories.concat(D)}),B(q(r,c)),I(!1),R(null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(d.a)(b.a.mark((function e(t){var r,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.categories,a=0;case 2:if(!(a<r.length)){e.next=9;break}if(r[a]!==t){e.next=6;break}return r.splice(a,1),e.abrupt("break",9);case 6:a++,e.next=2;break;case 9:s=Object(S.a)(Object(S.a)({},n),{},{categories:r}),B(q(s,c));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(Ie.a,{children:[Object(r.jsx)(Te.a,{eventKey:"review",title:"Review",children:h?Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{sm:12,md:2,children:Object(r.jsx)(ue.a,{variant:"secondary",onClick:function(){return x(!h)},children:"Cancel"})}),Object(r.jsx)(V.a,{sm:12,md:10,children:Object(r.jsxs)(se.a,{onSubmit:A,children:[Object(r.jsx)(se.a.Group,{children:Object(r.jsx)(se.a.Control,{as:"textarea",rows:10,value:u,onChange:function(e){return l(e.target.value)}})}),Object(r.jsx)(ue.a,{type:"submit",className:"mr-1",children:"Save changes"})]})})]}):Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{xs:12,sm:2,children:Object(r.jsx)(ue.a,{variant:"link",onClick:function(){return x(!h)},children:"Edit"})}),Object(r.jsx)(V.a,{xs:12,sm:10,children:u})]})}),Object(r.jsx)(Te.a,{eventKey:"quotes",title:"Quotes",children:v?Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{sm:12,md:2,children:Object(r.jsx)(ue.a,{variant:"secondary",onClick:function(){return m(!v)},children:"Cancel"})}),Object(r.jsx)(V.a,{sm:12,md:10,children:Object(r.jsxs)(se.a,{onSubmit:L,children:[Object(r.jsx)(se.a.Group,{children:Object(r.jsx)(se.a.Control,{as:"textarea",rows:8,onChange:function(e){return y(e.target.value)},placeholder:"Write your quote here."})}),Object(r.jsx)(ue.a,{type:"submit",className:"mr-1",children:"Save quote"})]})})]}):Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{xs:12,sm:2,children:Object(r.jsx)(ue.a,{variant:"link",onClick:function(){return m(!v)},children:Object(r.jsx)(je.c,{size:35})})}),Object(r.jsx)(V.a,{xs:12,sm:10,children:n.quotes.map((function(e){return Object(r.jsx)(Y.a,{className:"mb-3 mt-3",children:Object(r.jsx)(V.a,{children:Object(r.jsxs)(xe.a,{children:[Object(r.jsx)(xe.a.Header,{children:Object(r.jsx)(Y.a,{children:Object(r.jsx)(V.a,{className:"pr-0 text-right",children:Object(r.jsx)(ke.a,{className:"pointer",onClick:function(){return F(e.id)}})})})}),Object(r.jsx)(xe.a.Body,{className:"overflow-auto",children:Object(r.jsxs)("i",{children:[" ",e.quote]})})]})},e.id)})}))})]})}),Object(r.jsx)(Te.a,{eventKey:"categories",title:"Categories",children:E?Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{sm:12,md:2,children:Object(r.jsx)(ue.a,{variant:"secondary",onClick:function(){return I(!E)},children:"Cancel"})}),Object(r.jsx)(V.a,{sm:12,md:10,children:Object(r.jsxs)(se.a,{onSubmit:K,children:[Object(r.jsx)(se.a.Group,{children:Object(r.jsx)(se.a.Control,{type:"input",onChange:function(e){return R(e.target.value)}})}),Object(r.jsx)(ue.a,{type:"submit",className:"mr-1",children:"Save category"})]})})]}):Object(r.jsxs)(Y.a,{className:"pt-3",children:[Object(r.jsx)(V.a,{xs:12,sm:2,children:Object(r.jsx)(ue.a,{variant:"link",onClick:function(){return I(!E)},children:Object(r.jsx)(je.c,{size:35})})}),Object(r.jsx)(V.a,{xs:12,sm:10,className:"mt-3",children:Object(r.jsx)(Z.a,{children:Object(r.jsx)(Y.a,{children:n.categories.map((function(e){return Object(r.jsx)(we,{name:e,handleCategoryDelete:function(){return H(e)},owned:!0},e)}))})})})]})}),Object(r.jsx)(Te.a,{eventKey:"options",title:"Options",children:Object(r.jsx)(Y.a,{children:Object(r.jsx)(V.a,{className:"pt-5 text-center",children:Object(r.jsx)(ue.a,{variant:"link",style:{color:"red"},onClick:function(){return t(!0)},children:"Delete Book"})})})})]})},De=function(e){var t=e.show,n=e.setShow,a=e.book,c=e.handleDelete;return Object(r.jsxs)(be.a,{show:t,onHide:function(){return n(!1)},backdrop:"static",keyboard:!1,children:[Object(r.jsx)(be.a.Header,{closeButton:!0,children:Object(r.jsx)(be.a.Title,{children:"Warning"})}),Object(r.jsxs)(be.a.Body,{children:[Object(r.jsxs)("b",{children:["Delete ",a.title," by ",a.author]})," from the library?"]}),Object(r.jsxs)(be.a.Footer,{children:[Object(r.jsx)(ue.a,{className:"mr-1",variant:"danger",onClick:c,children:"Delete"}),Object(r.jsx)(ue.a,{variant:"secondary",onClick:function(){return n(!1)},children:"Cancel"})]})]})},Re=function(){var e=Object(o.c)((function(e){return e.ownedBook.bookInfo})),t=Object(o.c)((function(e){return e.login.token})),n=Object(a.useState)((function(){return null===e?null:e.read})),c=Object(ne.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)((function(){return null===e?null:e.owned})),l=Object(ne.a)(u,2),j=l[0],O=l[1],h=Object(a.useState)(!1),x=Object(ne.a)(h,2),f=x[0],p=x[1],v=Object(o.b)();Object(a.useEffect)((function(){null!==e&&(i(e.read),O(e.owned))}),[e]);var m=function(){var n=Object(d.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:v(z(e.id,t)),p(!1);case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return null===e?Object(r.jsx)(le.a,{to:"/"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(me.a,{fluid:!0,children:Object(r.jsx)(Z.a,{className:"jumbo",children:Object(r.jsxs)(Y.a,{children:[Object(r.jsxs)(V.a,{xs:7,children:[Object(r.jsx)("h1",{children:e.title}),Object(r.jsx)("h5",{children:Object(r.jsx)("i",{children:e.author})}),Object(r.jsx)(Ne,{book:e}),Object(r.jsxs)(se.a,{className:"pt-3",children:[Object(r.jsx)(se.a.Check,{inline:!0,type:"checkbox",id:"read",label:"Read",checked:s,onChange:function(){var n=Object(S.a)(Object(S.a)({},e),{},{read:!e.read});i(!e.read),v(q(n,t))}}),Object(r.jsx)(se.a.Check,{inline:!0,type:"checkbox",id:"owned",label:"Owned",checked:j,onChange:function(){var n=Object(S.a)(Object(S.a)({},e),{},{owned:!e.owned});O(!e.owned),v(q(n,t))}})]})]}),Object(r.jsx)(V.a,{xs:5,children:Object(r.jsx)("img",{src:e.linkToCoverImage,alt:"cover"})})]})})}),Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(De,{show:f,setShow:p,book:e,handleDelete:m}),Object(r.jsx)(Y.a,{children:Object(r.jsx)(V.a,{xs:9,children:Object(r.jsx)(_e,{setShow:p})})})]})]})},Be=function(){return null===Object(o.c)((function(e){return e.login.user}))?Object(r.jsx)(ve,{}):Object(r.jsx)($.a,{children:Object(r.jsxs)(le.d,{children:[Object(r.jsxs)(le.b,{path:"/search/:etag",children:[Object(r.jsx)(he,{showSort:!1}),Object(r.jsx)(Se,{})]}),Object(r.jsxs)(le.b,{path:"/search",children:[Object(r.jsx)(he,{showSort:!1}),Object(r.jsx)(te,{})]}),Object(r.jsxs)(le.b,{path:"/:title",children:[Object(r.jsx)(he,{showSort:!1}),Object(r.jsx)(Re,{})]}),Object(r.jsx)(le.b,{path:"/",children:Object(r.jsx)(Ee,{})})]})})};s.a.render(Object(r.jsx)(o.a,{store:M,children:Object(r.jsx)(Be,{})}),document.getElementById("root"))},36:function(e,t,n){}},[[129,1,2]]]);
//# sourceMappingURL=main.5351135b.chunk.js.map